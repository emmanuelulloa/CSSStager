<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>ClaSSanimator :: HTML5 Banners made easy.</title>
	<meta name="viewport" content="initial-scale=1, maximum-scale=1">
	<link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
	<link href='http://fonts.googleapis.com/css?family=Chango' rel='stylesheet' type='text/css'>
	<!-- CDN FOR LIVE SITE
	<script src="http://code.jquery.com/jquery-1.10.2.js"></script>
	<script src="http://code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
	-->
	<script src="js/jquery-1.11.3.min.js"></script>
	<script src="js/jquery-ui.min.js"></script>
	<style type="text/css">
		/*Reset*/
		html, body, div, span, ul, li, p, h1, h2, h3{
			margin: 0;
			padding: 0;
			border: 0;
			font-size: 100%;
			font: inherit;
			vertical-align: baseline;
		}
		body {
			line-height: 1;
		}
		ol, ul {
			list-style: none;
		}
		html, body {
			height: 100%;
		}
		body{
			font-family: 'Open Sans', Helvetica, Arial, sans-serif;
  			font-size: 14px;
  			transform-style: preserve-3d;
			-webkit-transform-style: preserve-3d;
			width: 100%;
			background-color: #eee;
			color: #555;
		}
		h1 {
			font-family: 'Chango', cursive;
			font-size: 200%;
			font-weight: bold;
			padding-top: 10px;
			margin-bottom: 10px;
		}
		p{
			font-size: 90%;
			margin-bottom: 20px;
		}
		a {color:#555;}
		.wrapper{
			width: 620px;
			padding-left: 16px;
			padding-right: 16px;
			margin: 0 auto;
		}
		.tagline {
			font-weight: bold;
			font-style: italic;
		}
		.instructions{
			line-height: 1.1;
		}
		.instructions li{
			display: block;
			margin-bottom: 10px;
		}
		.button {
			background-color: gainsboro;
			color:grey;
			border-radius: 3px;
			text-decoration: none;
			padding: 1px 3px;
			margin: 5px;
			box-shadow: 0px 0px 3px #999;
			transition: all 0.3s ease;
			-webkit-transition: all 0.3s ease;
			position: relative;
			display: inline-block;
			min-width: 120px;
			text-align: center;
		}
		.button:hover, .button:focus{
			box-shadow: 0px 0px 3px #FFF;
			background-color: crimson;
			color:white;
		}
		/*Animations*/
/* n:titleChar*11 dy:100ms e:linear d:0.4s to:cc kf:class|kf:0 rot:-45 op:0 sc:5|kf:66.67 sc:0.5 */
@keyframes titleChar {
	0% {
		opacity : 0;
		transform: scale(5) rotate(-45deg) ;
	}
	66.67% {
		transform: scale(0.5) ;
	}
}
@-webkit-keyframes titleChar {
	0% {
		opacity : 0;
		-webkit-transform: scale(5) rotate(-45deg) ;
	}
	66.67% {
		-webkit-transform: scale(0.5) ;
	}
}
.logo {
	border-radius: 3px;
	margin-top: 5px;
	color: #555;
	padding: 8px;
	width: 250px;
}
.titleChar {
	transform-origin: center center;
	-webkit-transform-origin: center center;
	animation-name: titleChar;
	animation-duration: 0.4s;
	animation-timing-function: linear;
	animation-iteration-count: 1;
	animation-direction: normal;
	animation-fill-mode: both;
	animation-play-state: running;
	-webkit-animation-name: titleChar;
	-webkit-animation-duration: 0.4s;
	-webkit-animation-timing-function: linear;
	-webkit-animation-iteration-count: 1;
	-webkit-animation-direction: normal;
	-webkit-animation-fill-mode: both;
	-webkit-animation-play-state: running;
}
.titleChar.colorized {
	color: crimson;
}
.layer {
	display: block;
	cursor: pointer;
	position: absolute;
	opacity: 1;
	border: 1px solid transparent;
}
.selected{
	border:1px solid #00a8ff;
}
.numberInput{
	width: 45px;
}
.row{
	display: block;
}
.block-row{
	display: block;
	clear:both;
	float:left;
	width: 100%;
	margin-bottom: 5px;
}
.dropTarget{
	display: block;
	float: left;
	clear: both;
	width: 90%;
	min-width: 200px;
	height: 20px;
	margin: 2%;
	padding: 3%;
	border: 1px solid #CCC;
	border-radius: 10px;
	background-color: #DEDEDE;
	transition: background-color 0.3s ease-out;
	-webkit-transition: background-color 0.3s ease-out;
}
.dropTarget:hover {
	color: white;
	background-color: crimson;
}
.to_md {
	display: inline-block;
	width: 100px;
	height: 100px;
	background-color: white;
	border: 1px solid #ccc;
	float: left;
	cursor:crosshair;
	position: relative;
}
.to_ctrl{
	display: inline-block;
	float: right;
}
.to_marker{
	background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAHCAYAAADEUlfTAAAAPUlEQVQIW32OSQoAMAgDM/9/tCUtaheoh6BMjKKu2HrcT5EUEc1gMWsBgBxsKGiQsTYccOW8m9+blXZ/OwDWfiIFjeCl0wAAAABJRU5ErkJggg==) no-repeat;
	display: block;
	width: 7px;
	height: 7px;
	position: relative;
}
.footer{
	font-size: 85%;
	display: block;
	margin: 30px 0;
}
/*NEW DESIGN*/
.app{
	clear: left;
	float: left;
	display: block;
	width: 100%;
	height: 100%;
	overflow: auto;
}
.shell {
	float:left;
	display: block;
	width: 100%;
	height: 100%;
	position: relative;
	background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAHCAYAAADEUlfTAAAAHElEQVQIW2M8f/78fwYcgBEkaWhoyIhNftBJAgDsiht0x6jrLgAAAABJRU5ErkJggg==) repeat;
}
.tools{
	float:left;
	display: block;
	width: 33%;
	padding-left: 1%;
	padding-right: 1%;
	height: 100%;
	overflow: auto;
	background: #eee;
}
.stage-container{
	float:left;
	display: block;
	width: 65%;
	height: 100%;
	overflow: auto;
	-webkit-box-shadow: inset 6px 0px 5px 0px rgba(0,0,0,0.2);
	-moz-box-shadow: inset 6px 0px 5px 0px rgba(0,0,0,0.2);
	box-shadow: inset 6px 0px 5px 0px rgba(0,0,0,0.2);
	position: relative;
}
.stage {
	background-color: white;
	border: 1px solid #555;
	display: block;
	width: 550px;
	height: 400px;
	box-shadow: 0px 0px 3px #999;
	position: inherit;
	margin: 0 auto;
	vertical-align: middle;
	margin-top: 10%;
	margin-bottom: 10%;
}
.ui-info{
	background-color: black;
	border-radius: 10px;
	font-size: 95%;
	height: 20px;
	font-weight: bold;
	margin: 3px 0;
	padding: 5px;
	text-align: left;
	border: 1px solid #ddd;
	box-shadow: 0px 0px 3px #999;
	/* Permalink - use to edit and share this gradient: http://colorzilla.com/gradient-editor/#ffffff+0,f1f1f1+50,e1e1e1+51,f6f6f6+100;White+Gloss+%231 */
	background: #ffffff; /* Old browsers */
	background: -moz-linear-gradient(top,  #ffffff 0%, #f1f1f1 50%, #e1e1e1 51%, #f6f6f6 100%); /* FF3.6+ */
	background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#ffffff), color-stop(50%,#f1f1f1), color-stop(51%,#e1e1e1), color-stop(100%,#f6f6f6)); /* Chrome,Safari4+ */
	background: -webkit-linear-gradient(top,  #ffffff 0%,#f1f1f1 50%,#e1e1e1 51%,#f6f6f6 100%); /* Chrome10+,Safari5.1+ */
	background: -o-linear-gradient(top,  #ffffff 0%,#f1f1f1 50%,#e1e1e1 51%,#f6f6f6 100%); /* Opera 11.10+ */
	background: -ms-linear-gradient(top,  #ffffff 0%,#f1f1f1 50%,#e1e1e1 51%,#f6f6f6 100%); /* IE10+ */
	background: linear-gradient(to bottom,  #ffffff 0%,#f1f1f1 50%,#e1e1e1 51%,#f6f6f6 100%); /* W3C */
}
		.output{
			font-family: "Courier New", Courier, monospace;
			width: 97%;
			color:#555;
			margin: 0 auto;
			text-align: left;
			padding: 5px;
			border: 1px solid #555;
			display: inline-block;
			white-space: pre;
  			word-wrap: normal;
			overflow: auto;
			outline: none;
		}
		.output::selection{
			color: skyblue;
			background-color: #393939;
			margin: 0;
			padding: 0;
		}
		.controls {
			border-radius: 10px;
			font-size: 85%;
			width: 96%;
			padding: 10px;
			margin: 0 auto 1%;
			color:gray;
			font-weight: bold;
			line-height: 2;
			border: 1px solid #ddd;
			box-shadow: 0px 0px 3px #999;
			/* Permalink - use to edit and share this gradient: http://colorzilla.com/gradient-editor/#ffffff+0,f1f1f1+50,e1e1e1+51,f6f6f6+100;White+Gloss+%231 */
			background: #ffffff; /* Old browsers */
			background: -moz-linear-gradient(top,  #ffffff 0%, #f1f1f1 50%, #e1e1e1 51%, #f6f6f6 100%); /* FF3.6+ */
			background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#ffffff), color-stop(50%,#f1f1f1), color-stop(51%,#e1e1e1), color-stop(100%,#f6f6f6)); /* Chrome,Safari4+ */
			background: -webkit-linear-gradient(top,  #ffffff 0%,#f1f1f1 50%,#e1e1e1 51%,#f6f6f6 100%); /* Chrome10+,Safari5.1+ */
			background: -o-linear-gradient(top,  #ffffff 0%,#f1f1f1 50%,#e1e1e1 51%,#f6f6f6 100%); /* Opera 11.10+ */
			background: -ms-linear-gradient(top,  #ffffff 0%,#f1f1f1 50%,#e1e1e1 51%,#f6f6f6 100%); /* IE10+ */
			background: linear-gradient(to bottom,  #ffffff 0%,#f1f1f1 50%,#e1e1e1 51%,#f6f6f6 100%); /* W3C */
		}
		.document-properties{
			display: block;
			min-height: 180px;
		}
		.elements-properties{
			display: none;
			height: 390px;
		}
		.hideOverflow {
			overflow: hidden;
		}
		.controls .left{
			width: 49%;
			padding-right: 1%;
			float: left;
			display: block;
			text-align: right;
			float: left;

		}
		.controls .right{
			width: 49%;
			padding-left: 1%;
			float: right;
			display: block;
			text-align: left;
			float: right;
		}
		.controls h2 {
			font-variant: small-caps;
			padding: 0;
			font-size: 100%;
			font-weight: bold;
			display: block;
			width: 100%;
			text-align: justify;
		}
		.controls strong{
			color: #555;
			font-weight: bolder;
		}
		.controls .lbl {
			display: inline-block;
			width: 60px;
		}
		/* PLUG-INS */
		.overlay{
			background-color: rgba(0,0,0,0.7);
			position: fixed;
			display: none;
			width: 100%;
			height: 100%;
			z-index: 999;
			overflow: auto;
		}
		.overlay .close{
			background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAQklEQVQYV5WQQQoAQAgC9f+PdulQVHRwuxQ5oEVJAgCSjL6r9BwueGgBXPDelV0Xun1GGrk23HP/g5a1dYz9HvfhD17FP/tzvfJcAAAAAElFTkSuQmCC);
			background-repeat: no-repeat;
			background-position: 5px 5px;
			border-radius: 10px;
			width: 20px;
			height: 20px;
			text-align: center;
			color: #FFF;
			background-color: #666;
			font-weight: bold;
			font-size: 30px;
			position: absolute;
			display: block;
			top: 10px;
			right: 10px;
			cursor: pointer;
		}
		.overlay textarea{
			width: 98%;
		}
		.overlay .row{
			margin-bottom: 5px;
		}
		.overlay .lbl{
			width: 75px;
			display: inline-block;
		}
		.overlay hr{
			width: 80%;
			text-align: center;
			border: 1px dashed #CCC;
		}
		.overlay .app-button{
			color: white;
			background-color: #666;
			border-radius: 5px;
			font-size: 14px;
			font-weight: bold;
			text-decoration: none;
			padding: 8px;
			margin: 3px;
			display: inline-block;
			transition: background-color 0.5s;
			-webkit-transition: background-color 0.5s;
		}
		.overlay .bottom{
			clear: both;
			width: 100%;
			padding: 0;
			margin: 0;
		}
		/* tranCiSSioner */
		.tranCiSSioner_tools {
			position: relative;
			background-color: #FFF;
			border-radius: 15px;
			padding: 2%;
			width: 68%;
			height: 83%;
			margin: 2% auto;
			display: none;
		}
		.tranCiSSioner_tools hr{
			border: 1px dashed #FFF;
		}
		.tranCiSSioner_tools .blueText{
			color: dodgerblue;
		}
		.tranCiSSioner_tools .close{
			background-color: dodgerblue;
		}
		.tranCiSSioner_tools .colWrapper {
			width: 100%;
			height: 310px;
			border-radius: 10px;
			overflow: hidden;
			margin: 0;
			padding: 0;
			box-shadow: 0 1px 5px rgba(0,0,0,0.45);
			-webkit-box-shadow: 0 1px 5px rgba(0,0,0,0.45);
			/* Permalink - use to edit and share this gradient: http://colorzilla.com/gradient-editor/#f6f8f9+0,e5ebee+50,d7dee3+51,f5f7f9+100;White+Gloss */
background: rgb(246,248,249); /* Old browsers */
background: -moz-linear-gradient(top,  rgba(246,248,249,1) 0%, rgba(229,235,238,1) 50%, rgba(215,222,227,1) 51%, rgba(245,247,249,1) 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(246,248,249,1)), color-stop(50%,rgba(229,235,238,1)), color-stop(51%,rgba(215,222,227,1)), color-stop(100%,rgba(245,247,249,1))); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top,  rgba(246,248,249,1) 0%,rgba(229,235,238,1) 50%,rgba(215,222,227,1) 51%,rgba(245,247,249,1) 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top,  rgba(246,248,249,1) 0%,rgba(229,235,238,1) 50%,rgba(215,222,227,1) 51%,rgba(245,247,249,1) 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top,  rgba(246,248,249,1) 0%,rgba(229,235,238,1) 50%,rgba(215,222,227,1) 51%,rgba(245,247,249,1) 100%); /* IE10+ */
background: linear-gradient(to bottom,  rgba(246,248,249,1) 0%,rgba(229,235,238,1) 50%,rgba(215,222,227,1) 51%,rgba(245,247,249,1) 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#f6f8f9', endColorstr='#f5f7f9',GradientType=0 ); /* IE6-9 */

		}
		.tranCiSSioner_tools .col1{
			padding: 1%;
			margin: 0;
			float: left;
			display: inline-block;
			height: 100%;
/* Permalink - use to edit and share this gradient: http://colorzilla.com/gradient-editor/#e6f0a3+0,d2e638+50,c3d825+51,dbf043+100;Green+Gloss+%232 */
background: rgb(230,240,163); /* Old browsers */
background: -moz-linear-gradient(top,  rgba(230,240,163,1) 0%, rgba(210,230,56,1) 50%, rgba(195,216,37,1) 51%, rgba(219,240,67,1) 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(230,240,163,1)), color-stop(50%,rgba(210,230,56,1)), color-stop(51%,rgba(195,216,37,1)), color-stop(100%,rgba(219,240,67,1))); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top,  rgba(230,240,163,1) 0%,rgba(210,230,56,1) 50%,rgba(195,216,37,1) 51%,rgba(219,240,67,1) 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top,  rgba(230,240,163,1) 0%,rgba(210,230,56,1) 50%,rgba(195,216,37,1) 51%,rgba(219,240,67,1) 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top,  rgba(230,240,163,1) 0%,rgba(210,230,56,1) 50%,rgba(195,216,37,1) 51%,rgba(219,240,67,1) 100%); /* IE10+ */
background: linear-gradient(to bottom,  rgba(230,240,163,1) 0%,rgba(210,230,56,1) 50%,rgba(195,216,37,1) 51%,rgba(219,240,67,1) 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#e6f0a3', endColorstr='#dbf043',GradientType=0 ); /* IE6-9 */

		}
		.tranCiSSioner_tools .col2{
			width:31%;
			padding: 1%;
			margin: 0;
			float: left;
			display: inline-block;
			text-align: center;
		}
		.tranCiSSioner_tools .col3{
			padding: 1%;
			margin: 0;
			float: right;
			display: inline-block;
			height: 100%;
/* Permalink - use to edit and share this gradient: http://colorzilla.com/gradient-editor/#fcecfc+0,fba6e1+50,fd89d7+51,ff7cd8+100;Pink+Gloss+%232 */
background: rgb(252,236,252); /* Old browsers */
background: -moz-linear-gradient(top,  rgba(252,236,252,1) 0%, rgba(251,166,225,1) 50%, rgba(253,137,215,1) 51%, rgba(255,124,216,1) 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(252,236,252,1)), color-stop(50%,rgba(251,166,225,1)), color-stop(51%,rgba(253,137,215,1)), color-stop(100%,rgba(255,124,216,1))); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top,  rgba(252,236,252,1) 0%,rgba(251,166,225,1) 50%,rgba(253,137,215,1) 51%,rgba(255,124,216,1) 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top,  rgba(252,236,252,1) 0%,rgba(251,166,225,1) 50%,rgba(253,137,215,1) 51%,rgba(255,124,216,1) 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top,  rgba(252,236,252,1) 0%,rgba(251,166,225,1) 50%,rgba(253,137,215,1) 51%,rgba(255,124,216,1) 100%); /* IE10+ */
background: linear-gradient(to bottom,  rgba(252,236,252,1) 0%,rgba(251,166,225,1) 50%,rgba(253,137,215,1) 51%,rgba(255,124,216,1) 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#fcecfc', endColorstr='#ff7cd8',GradientType=0 ); /* IE6-9 */

		}
		.position_scene{
			margin: 8px 0px;
		}
		.position_scene_tbl{
			border: 1px solid #FFF;
			width: 150px;
			text-align: center;
		}
		.tranCiSSioner_tools .app-button{
			background-color: dodgerblue;
		}
		.tranCiSSioner_tools .app-button:hover{
			background-color: skyblue;
		}
		/* spriteSlicer */
		.spriteSlicer_tools {
			position: relative;
			background-color: #FFF;
			border-radius: 15px;
			padding: 1% 1% 2% 1%;
			width: 90%;
			min-height: 85%;
			height: auto;
			margin: 2% auto;
			display: none;
			overflow: auto;
		}
		.spriteSlicer_tools .greenText{
			color: mediumseagreen;
		}
		.spriteSlicer_tools .close{
			background-color: mediumseagreen;
		}
		.spriteSlicer_tools .col1{
			width:auto;
			height: 100%;
			padding: 0;
			margin: 0;
			float: left;
			display: inline-block;
			overflow: auto;
		}
		.spriteSlicer_tools .col2{
			padding: 0;
			margin: 0 0 0 20px;
			float: left;
			display: inline-block;
		}
		.spriteSlicer_tools .app-button{
			background-color: mediumseagreen;
		}
		.spriteSlicer_tools .app-button:hover{
			background-color: seagreen;
		}
		#ss_code_txt {
			width: 95%;
			height: 50%;
		}
		#ss_cuts_txt {
			border: none;
			outline: none;
			font-weight: bold;
			font-size: 12px;
			color: seagreen;
			width: 95%;
			border: 1px dotted mediumseagreen;
			border-radius: 8px;
			padding: 3px;
			margin: 3px;
		}
		.ss_container {
			border: 1px solid #999;
			background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAJ0lEQVQYV2M8c+bMfwYkYGxsjMxlYKSDgv///6O44ezZs6huoL0CAHomKYWYrWVpAAAAAElFTkSuQmCC);
			background-repeat: repeat;
			width: 96%;
			margin-right: 2%;
			margin-left: 2%;
			margin-bottom: 0;
			margin-left: 0;
			padding: 0;
			display: block;
			cursor:row-resize;
			position: relative;
			overflow: auto;
		}
		.ss_image {
			background-color: transparent;
			background-repeat: no-repeat;
		}
		.ss_guide {
			width: 100%;
			height: 12px;
			display: block;
			position: absolute;
			border-top: 1px dashed limegreen;
			margin: 0;
			padding: 0;
			top: 0px;
			left: 0px;
			font-size: 10px;
			text-align: center;
			color: white;
			background-color: rgba(0,0,0,0.3);
			font-family: courier, mono;
		}
		.ss_guide_vert{
			width: 1px;
			height: 1px;
			position: absolute;
			border-left: 1px dashed fuchsia;
			margin: 0;
			padding: 0;
			top: 0px;
			left: 0px;
		}
		/* misc */
		.ui-button, .ui-button:visited {
			outline: none;
			border: none;
			display: inline-block;
			text-align: center;
			background-color: dodgerblue;
			font-weight: bold;
			font-size: 16px;
			color: white;
			border-radius: 50%;
			width: 16px;
			height: 16px;
			text-decoration: none;
			margin: 0;
			padding: 1px;
		}
		.ui-button:hover, .ui-button:focus, .ui-button:active {
			background-color: skyblue;
		}
		.bnr {
			display: none;
		}
		/* VCAM */
		.vcam {
			display: none;
		}
		.vcam h1{
			margin: 0;
			padding: 0;
		}
		.vcam .color{
			color: fuchsia;
		}
		.vcam .link{
			margin: 0;
			padding: 0;
			display: inline-block;
			text-align: center;
			border-radius: 50%;
			width: 20px;
			height: 20px;
			font-size: 10px;
			color: #FFF;
			font-weight: bolder;
			text-decoration: none;
			box-shadow: 0px 0px 3px #999;
			background-color: fuchsia;
		}
		.vcam .lbl{
			width: 50px;
			display: inline-block;
			text-align: center;
			font-weight: 700;
		}
		.vcam_ui {
			display: none;
			background-color: transparent;
			border: 1px solid fuchsia;
			position: absolute;
			background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAIAAAAECAYAAACk7+45AAAAGUlEQVQIW2P8z/C/noGBgYERzgDxwCIwBgCRUQT/kkcDwAAAAABJRU5ErkJggg==);
			background-repeat: repeat;
			z-index: 9999;
			cursor:not-allowed;
		}
	</style>
</head>
<body>
	<div class="app">
	<div class="overlay">
		<!-- css vcam 
		http://archive.oreilly.com/pub/a/javascript/2004/08/17/flashhacks.html?page=1
		http://bitey.com/smf/index.php?topic=705.0
		http://flixel.org/docs/org/flixel/FlxCamera.html
		http://www.flashkit.com/movies/Components/Flash_V--_redesig-10378/index.php
		-->
		<div class="tranCiSSioner_tools">
			<h1>tran<span class="blueText">C</span>i<span class="blueText">SS</span>ioner</h1>
			<div id="tranCiSSioner_close" class="close"></div>
			<div class="colWrapper">
			<div class="col1">
				<span class="row"><label for="" class="lbl">Scene <strong>IN</strong>:</label> <input id="scene_in_txt" type="number" min="1" step="1" value="1" class='numberInput'> <a href="#" id="ss_next_scene" class="ui-button">+</a> </span>
				<hr />
				<span class="row"><label for="" class="lbl">Opacity:</label> <input type="number" name="" id="opacity_in_txt" value="0" class='numberInput'></span>
				<span class="row">
					<input type="checkbox" id="tcss_blur_in_ck" value="blur(10px)" /><label for="tcss_blur_ck">Blur </label>
					| Fade effect: 
					<select id="tcss_fade_in_sl">
						<option value="" selected >Select</option>
						<option value="brightness(0) contrast(10) grayscale(1)">Fade from black</option>
						<option value="brightness(10) grayscale(1)">Fade from white</option>
					</select>
				</span>
				<div class="position_scene">
					<span class="row"><label for="">Entrance position:</label></span>
					<table class="position_scene_tbl">
						<tr>
							<td><input type="radio" name="scene_in_rb" id="tl_in_rb" value="tl" /></td>
							<td><input type="radio" name="scene_in_rb" id="top_in_rb" value="top" /></td>
							<td><input type="radio" name="scene_in_rb" id="tr_in_rb" value="tr" /></td>
						</tr>
						<tr>
							<td><input type="radio" name="scene_in_rb" id="left_rb" value="left" /></td>
							<td><input type="radio" name="scene_in_rb" id="none_in_rb" value="none" checked /></td>
							<td><input type="radio" name="scene_in_rb" id="right_rb" value="right" /></td>
						</tr>
						<tr>
							<td><input type="radio" name="scene_in_rb" id="bl_in_rb" value="bl" /></td>
							<td><input type="radio" name="scene_in_rb" id="bottom_in_rb" value="bottom" /></td>
							<td><input type="radio" name="scene_in_rb" id="br_in_rb" value="br"></td>
						</tr>
					</table>
				</div>
				<span class="row"><label for="" class="lbl">Offset:</label><input id="offset_in_txt" type="number" value="10" class='numberInput' />px</span>
				<span class="row">Rotate: <input type="number" id="rotate_in_txt" value="0" step="1" class="numberInput">deg | Scale: <input type="number" id="scale_in_txt" value="1" step="0.1" class="numberInput"></span>
				<!--span class="row"><label for="" class="lbl">Transform:</label><input type="text" name="" id="matrix_in_txt"></span -->
				<hr />
				<span class="row"><label for="" class="lbl">Duration:</label><input id="duration_in_txt" type="number" value="0.5" step="0.1" class='numberInput'>s | <label for="" class="lbl">Delay:</label><input id="delay_in_txt" type="number" value="0.5" step="0.1" class='numberInput'>s</span>
				<span class="row"><label for="" class="lbl">Ease:</label>
					<select id="ease_in_sl">
						<option value="ease">ease</option>
						<option value="ease-out" selected >ease-out</option>
						<option value="ease-in">ease-in</option>
						<option value="ease-in-out">ease-in-out</option>
						<option value="linear">linear</option>
						<option value="cubic-bezier(.65, 1.95, .03, .32)">bounce</option>
						<option value="cubic-bezier(0.47, 2.02, 0.31, -0.36)">elastic</option>
						<option value="cubic-bezier(.25,2,.75,.5)">spring</option>
						<option value="cubic-bezier(.175, .885,.32,1.275)">swing</option>
						<option value="cubic-bezier(.755,.05,.855,.06)">snap</option>
						<option value="cubic-bezier(.2,1,.9,-0.5)">hesitate</option>
						<option value="cubic-bezier(.5,0,.8,.15)">anticipate</option>
						<option value="cubic-bezier(.41,.41,.35,1.2)">overshoot</option>
						<option value="cubic-bezier(.45,-0.67,.53,1.63)">anticipate overshoot</option>
						<option value="cubic-bezier(0.4,0,1,1)">fast out</option>
						<option value="cubic-bezier(0,0,0.2,1)">slow in</option>
						<option value="cubic-bezier(0.4,0,0.2,1)">fast out - slow in</option>
						<optgroup label='Penner easings:'>
							<option value="cubic-bezier(.55,.055,.675,.19)">easeInCubic</option>
							<option value="cubic-bezier(.215,.61,.355,1)">easeOutCubic</option>
							<option value="cubic-bezier(.645,.045,.355,1)">easeInOutCubic</option>
							<option value="cubic-bezier(.6,.04,.98,.335)">easeInCirc</option>
							<option value="cubic-bezier(.075,.82,.165,1)">easeOutCirc</option>
							<option value="cubic-bezier(.785,.135,.15,.86)">easeInOutCirc</option>
							<option value="cubic-bezier(.95,.05,.795,.035)">easeInExpo</option>
							<option value="cubic-bezier(.19,1,.22,1)">easeOutExpo</option>
							<option value="cubic-bezier(1,0,0,1)">easeInOutExpo</option>
							<option value="cubic-bezier(.55,.085,.68,.53)">easeInQuad</option>
							<option value="cubic-bezier(.25,.46,.45,.94)">easeOutQuad</option>
							<option value="cubic-bezier(.455,.03,.515,.955)">easeInOutQuad</option>
							<option value="cubic-bezier(.895,.03,.685,.22)">easeInQuart</option>
							<option value="cubic-bezier(.165,.84,.44,1)">easeOutQuart</option>
							<option value="cubic-bezier(.77,0,.175,1)">easeInOutQuart</option>
							<option value="cubic-bezier(.755,.05,.855,.06)">easeInQuint</option>
							<option value="cubic-bezier(.23,1,.32,1)">easeOutQuint</option>
							<option value="cubic-bezier(.86,0,.07,1)">easeInOutQuint</option>
							<option value="cubic-bezier(.47,0,.745,.715)">easeInSine</option>
							<option value="cubic-bezier(.39,.575,.565,1)">easeOutSine</option>
							<option value="cubic-bezier(.445,.05,.55,.95)">easeInOutSine</option>
							<option value="cubic-bezier(.6,-.28,.735,.045)">easeInBack</option>
							<option value="cubic-bezier(.175, .885,.32,1.275)">easeOutBack</option>
							<option value="cubic-bezier(.68,-.55,.265,1.55)">easeInOutBack</option>
						</optgroup>
					</select>
				</span>
			</div>
			<div class="col2">
				<!-- ELEMENT PROPERTIES & ANIMATIONS -->
				<span class="row">Element class: <input id="scene_element_txt" type="text" value=".myDiv" /></span>
				<span class="row"><label for="left_scene_txt">X:</label> <input id="left_scene_txt" type="number" size="4" value='0' class="numberInput" /><label for="top_scene_txt"> Y:</label> <input id="top_scene_txt" type="number" size="4" value='0' class="numberInput" /></span>
				<!--span class="row"><input type="checkbox" name="use_animation_ck" id="use_animation_ck"><label for="use_animation_ck"> Use attention getter:</label></span>
				<span class="row">
					<select name="use_animation_sl" id="use_animation_sl">
						<option value="">Horizontal</option>
						<option value="">Vertical</option>
						<option value="">Scale</option>
						<option value="">Grow</option>
						<option value="">Slow rotation</option>
						<option value="">Buzz</option>
						<option value="">Shake</option>
						<option value="">Hard bounce</option>
						<option value="">Cartoon bounce</option>
						<option value="">Hang</option>
						<option value="">Float</option>
						<option value="">Flash</option>
					</select>
				</span-->
			</div>
			<div class="col3">
				<span class="row"><label class="lbl">Scene <strong>OUT</strong>:</label> <input id="scene_out_txt" type="number" min="0" step="1" value="2" class='numberInput'></span>
				<hr />
				<span class="row"><label class="lbl">Opacity:</label> <input type="number" name="" id="opacity_out_txt" value="0" class='numberInput'></span>
				<span class="row">
					<input type="checkbox" id="tcss_blur_out_ck" value="blur(10px)" /><label for="tcss_blur_ck">Blur </label>
					| Fade effect: 
					<select id="tcss_fade_out_sl">
						<option value="" selected >Select</option>
						<option value="brightness(0) contrast(10) grayscale(1)">Fade to black</option>
						<option value="brightness(10) grayscale(1)">Fade to white</option>
					</select>
				</span>
				<div class="position_scene">
					<span class="row"><label for="">Exit position:</label></span>
					<table class="position_scene_tbl">
						<tr>
							<td><input type="radio" name="scene_out_rb" id="tl_out_rb" value="tl" /></td>
							<td><input type="radio" name="scene_out_rb" id="top_out_rb" value="top" /></td>
							<td><input type="radio" name="scene_out_rb" id="tr_out_rb" value="tr" /></td>
						</tr>
						<tr>
							<td><input type="radio" name="scene_out_rb" id="left_rb" value="left" /></td>
							<td><input type="radio" name="scene_out_rb" id="none_out_rb" value="none" checked /></td>
							<td><input type="radio" name="scene_out_rb" id="right_rb" value="right" /></td>
						</tr>
						<tr>
							<td><input type="radio" name="scene_out_rb" id="bl_out_rb" value="bl" /></td>
							<td><input type="radio" name="scene_out_rb" id="bottom_out_rb" value="bottom" /></td>
							<td><input type="radio" name="scene_out_rb" id="br_out_rb" value="br"></td>
						</tr>
					</table>
				</div>
				<span class="row"><label for="" class="lbl">Offset:</label><input id="offset_out_txt" type="number" value="10" class='numberInput' />px</span>
				<span class="row">Rotate: <input type="number" id="rotate_out_txt" value="0" step="1" class="numberInput">deg | Scale: <input type="number" id="scale_out_txt" value="1" step="0.1" class="numberInput"></span>
				<!--span class="row"><label for="" class="lbl">Transform:</label><input type="text" name="" id="matrix_out_txt"></span -->
				<hr />
				<span class="row"><label for="" class="lbl">Duration:</label><input id="duration_out_txt" type="number" value="0.3" step="0.1" class='numberInput'>s | <label for="" class="lbl">Delay:</label><input id="delay_out_txt" type="number" value="0" step="0.1" class='numberInput'>s</span>
				<span class="row"><label for="" class="lbl">Ease:</label>
					<select id="ease_out_sl">
						<option value="ease">ease</option>
						<option value="ease-out">ease-out</option>
						<option value="ease-in" selected >ease-in</option>
						<option value="ease-in-out">ease-in-out</option>
						<option value="linear">linear</option>
						<option value="cubic-bezier(.65, 1.95, .03, .32)">bounce</option>
						<option value="cubic-bezier(0.47, 2.02, 0.31, -0.36)">elastic</option>
						<option value="cubic-bezier(.25,2,.75,.5)">spring</option>
						<option value="cubic-bezier(.175, .885,.32,1.275)">swing</option>
						<option value="cubic-bezier(.755,.05,.855,.06)">snap</option>
						<option value="cubic-bezier(.2,1,.9,-0.5)">hesitate</option>
						<option value="cubic-bezier(.5,0,.8,.15)">anticipate</option>
						<option value="cubic-bezier(.41,.41,.35,1.2)">overshoot</option>
						<option value="cubic-bezier(.45,-0.67,.53,1.63)">anticipate overshoot</option>
						<option value="cubic-bezier(0.4,0,1,1)">fast out</option>
						<option value="cubic-bezier(0,0,0.2,1)">slow in</option>
						<option value="cubic-bezier(0.4,0,0.2,1)">fast out - slow in</option>
						<optgroup label='Penner easings:'>
							<option value="cubic-bezier(.55,.055,.675,.19)">easeInCubic</option>
							<option value="cubic-bezier(.215,.61,.355,1)">easeOutCubic</option>
							<option value="cubic-bezier(.645,.045,.355,1)">easeInOutCubic</option>
							<option value="cubic-bezier(.6,.04,.98,.335)">easeInCirc</option>
							<option value="cubic-bezier(.075,.82,.165,1)">easeOutCirc</option>
							<option value="cubic-bezier(.785,.135,.15,.86)">easeInOutCirc</option>
							<option value="cubic-bezier(.95,.05,.795,.035)">easeInExpo</option>
							<option value="cubic-bezier(.19,1,.22,1)">easeOutExpo</option>
							<option value="cubic-bezier(1,0,0,1)">easeInOutExpo</option>
							<option value="cubic-bezier(.55,.085,.68,.53)">easeInQuad</option>
							<option value="cubic-bezier(.25,.46,.45,.94)">easeOutQuad</option>
							<option value="cubic-bezier(.455,.03,.515,.955)">easeInOutQuad</option>
							<option value="cubic-bezier(.895,.03,.685,.22)">easeInQuart</option>
							<option value="cubic-bezier(.165,.84,.44,1)">easeOutQuart</option>
							<option value="cubic-bezier(.77,0,.175,1)">easeInOutQuart</option>
							<option value="cubic-bezier(.755,.05,.855,.06)">easeInQuint</option>
							<option value="cubic-bezier(.23,1,.32,1)">easeOutQuint</option>
							<option value="cubic-bezier(.86,0,.07,1)">easeInOutQuint</option>
							<option value="cubic-bezier(.47,0,.745,.715)">easeInSine</option>
							<option value="cubic-bezier(.39,.575,.565,1)">easeOutSine</option>
							<option value="cubic-bezier(.445,.05,.55,.95)">easeInOutSine</option>
							<option value="cubic-bezier(.6,-.28,.735,.045)">easeInBack</option>
							<option value="cubic-bezier(.175, .885,.32,1.275)">easeOutBack</option>
							<option value="cubic-bezier(.68,-.55,.265,1.55)">easeInOutBack</option>
						</optgroup>
					</select>
				</span>
			</div>
			</div>
			<div class="bottom">
				<input type="checkbox" id="tranCiSSioner_useMatrix_ck" checked /><label for="tranCiSSioner_useMatrix_ck">Use Matrix Operations</label> |
				<a href="#" id="tranCiSSioner_app-button" class="app-button">Create CSS</a>
				<textarea id="transition_css_txt" class="output" cols="30" rows="10"></textarea>
			<!--ul>
				<li><a href="https://www.google.com/design/spec/animation/authentic-motion.html#authentic-motion-mass-weight" target="_blank">Animation guidelines by Google</a></li>
				<li><a href="https://developers.google.com/web/fundamentals/look-and-feel/animations/?hl=en" target="_blank">Web Fundamentals: Animations by Google</a></li>
			</ul -->				
			</div>

		</div>
		<div class="spriteSlicer_tools">
			<h1>Sprite<span class="greenText">Slicer<span class="greenText"></h1>
			<p>Hover the image, click where you want to cut.</p>
			<div id="spriteSlicer_close" class="close"></div>
			<div class="col1">
				<div class="ss_container">
					<div class="ss_image"></div>
					<div class="ss_guide_vert"></div>
					<div class="ss_guide">
						x:0px y:0px
					</div>
				</div>
			</div>
			<div class="col2">
				<span class="row">Vertical cut positions: <input id="ss_cuts_txt" value="" type="text" /></span>
				<span class="row"><input type="checkbox" id="ss_layered_ck"><label for="ss_layered_ck">Layered (elements will have the same 'y' position)</label></span>
				<hr />				
				<span class="row"><input type="checkbox" id="ss_transition_ck" ><label for="ss_transition_ck">Use opacity transitions:</label></span>			
				<span class="row">Scene IN <input type="number" id="ss_scene_in_txt" value="1" class="numberInput">| Scene OUT <input type="number" id="ss_scene_out_txt" value="2" class="numberInput"></span>
				<span class="row">Delay IN: <input type="number" id="ss_delay_in" step="0.1" min="0" value="0.5" class="numberInput"/>s | Delay OUT:<input type="number" id="ss_delay_out" step="0.1" min="0" value="0.3" class="numberInput"/>s</span>
				<span class="row"><input type="checkbox" id="ss_scene_per_slice_ck"><label for="ss_scene_per_slice_ck">Each slice is a scene</label></span>	
				<span class="row"><input type="checkbox" id="ss_staggered_ck" /><label for="ss_staggered_ck">Staggered delay</label></span>
				<span class="row"><a href="#" id="spriteSplicer_app-button" class="app-button">Create CSS</a></span>
				<span class="row"><textarea id="ss_code_txt" class="output" cols="50" rows="15"></textarea></span>
				<span class="row">Apply slice to current element:<input type="number" id="ss_slices" min="1" step="1" max="1" value="1" /> <a href="#" id="ss_apply" class="button">&lt; apply</a></span>
				<hr />
				<span class="row"><a href="#" id="ss_reset" class="button">reset</a></span>
			</div>
		</div>
	</div>
	<div class="shell">
		<div class="tools">
			<h1 class="logo"> 
			<span class="titleChar colorized">C</span><span class="titleChar">l</span><span class="titleChar">a</span><span class="titleChar colorized">S</span><span class="titleChar colorized">S</span><span class="titleChar">a</span><span class="titleChar">n</span><span class="titleChar">i</span><span class="titleChar">m</span><span class="titleChar">a</span><span class="titleChar">t</span><span class="titleChar">o</span><span class="titleChar">r</span></h1>
			<p class='tagline'>HTML5 Banner animations made easy.</p>
			<div class="controls document-properties">
				<h2>Document Properties</h2>
				<span class="row">Banner name: <input type="text" id="banner_txt" value="myBanner" /> | Media Platform: 
					<select id="rm_sl">
						<option value="dcm">DCM</option>
						<option value="dc">DoubleClick Studio</option>
						<option value="flashtalking">FlashTalking</option>
						<option value="atlas">Atlas</option>
					</select>
				</span>
				<span class="row">Background/Guide Image: </span>
				<span class="row"><input type='file' accept='image/*' id='guide_fl' class='dropTarget' /></span>
				<span class="row">Banner size:
					<select name="size_sl" id="size_sl">
						<optgroup label='Select size:'>
						<option value="500x400">500x400 New Document</option>
						<option value="300x250">300x250 Medium Rectangle</option>
						<option value="728x90">728x90 Leaderboard Banner</option>
						<option value="160x600">160x600 Wide Skyscraper</option>
						<option value="120x600">120x600 Skyscraper</option>
						<option value="940x400">940x400 Website Slider</option>
						<option value="720x300">720x300 Pop-Under</option>
						<option value="300x600">300x600 Half Page Ad</option>
						<option value="250x250">250x250 Square Popup</option>
						<option value="428x60">428x60 Full Banner</option>
						<option value="336x280">336x280 Square</option>
						<option value="120x240">120x240 Vertical Banner</option>
						<option value="240x400">240x400 Vertical Rectangle</option>
						<option value="234x60">234x60 Half Banner</option>
						<option value="180x150">180x150 Rectangle</option>
						<option value="125x125">125x125 Square Button</option>
						<option value="120x90">120x90 Button</option>
						<option value="120x60">120x60 Button</option>
						<option value="88x31">88x31 Micro Bar</option>
						</optgroup>
					</select>	
				</span>
				<span class="row">
					Custom size: <input type="number" size="4" value='550' id='width_txt' class='numberInput' /> x <input type="text" value='400' id='height_txt' class='numberInput' />
				</span>
				<span class="row">Background Color: <input id="bgColor_txt" type="color" value="#FFFFFF" class='numberInput' /> Border Color: <input id="borderColor_txt" type="color" value="#666666" class='numberInput' /></span>
				<span class="row"><input id="overflow_ck" type="checkbox" /><label for="overflow_ck">Hide off-stage objects.</label> | <input type="checkbox" id="use_vcam_ck" /><label for="use_vcam_ck">Use VCAM</label></span>
			</div>
			<div id="vcam" class="controls vcam">
				<span class="titleChar"><h1>V<span class="color">CAM</span></h1></span>
				<span class="row">Name: <input type="text" value="vcam" id="vcam_name" /> Scene: <input type="number" value="1" step="1" min="1" id="vcam_scene" class="numberInput" /><a href="#" class="button" id="vcam_capture" style="display:none;">Capture NEXT Scene</a></span> 
				<span class="row">Apply matrix to vcam: <input type="text" id="vcam_matrix"></span>
				<span class="row"><a href="#" class="link" id="pan_lt">&lt;</a><span class="lbl">PAN</span><a href="#" class="link" id="pan_gt">&gt;</a> <input type="number" id="pan_txt" class="numberInput" value="0" step="1" /></span>
				<span class="row"><a href="#" class="link" id="tilt_lt">&lt;</a><span class="lbl">TILT</span><a href="#" class="link" id="tilt_gt">&gt;</a> <input type="number" id="tilt_txt" class="numberInput" value="0" step="1" /></span>
				<span class="row"><a href="#" class="link" id="zoom_lt">-</a><span class="lbl">ZOOM</span><a href="#" class="link" id="zoom_gt">+</a> <input type="number" id="zoom_txt" class="numberInput" value="1" step="0.1" /></span>
				<span class="row"><a href="#" class="link" id="roll_lt">&lt;</a><span class="lbl">ROLL</span><a href="#" class="link" id="roll_gt">&gt;</a> <input type="number" id="roll_txt" class="numberInput" value="0" step="1" /></span>
				<span class="row">Duration:<input id="vcam_duration_in_txt" type="number" value="1" step="0.1" class='numberInput'>s | Delay:<input id="vcam_delay_in_txt" type="number" value="0.5" step="0.1" class='numberInput'>s | Ease:
					<select id="vcam_ease_in_sl">
						<option value="ease">ease</option>
						<option value="ease-out">ease-out</option>
						<option value="ease-in">ease-in</option>
						<option value="ease-in-out">ease-in-out</option>
						<option value="linear" selected >linear</option>
						<option value="cubic-bezier(.65, 1.95, .03, .32)">bounce</option>
						<option value="cubic-bezier(0.47, 2.02, 0.31, -0.36)">elastic</option>
						<option value="cubic-bezier(.25,2,.75,.5)">spring</option>
						<option value="cubic-bezier(.175, .885,.32,1.275)">swing</option>
						<option value="cubic-bezier(.755,.05,.855,.06)">snap</option>
						<option value="cubic-bezier(.2,1,.9,-0.5)">hesitate</option>
						<option value="cubic-bezier(.5,0,.8,.15)">anticipate</option>
						<option value="cubic-bezier(.41,.41,.35,1.2)">overshoot</option>
						<option value="cubic-bezier(.45,-0.67,.53,1.63)">anticipate overshoot</option>
						<option value="cubic-bezier(0.4,0,1,1)">fast out</option>
						<option value="cubic-bezier(0,0,0.2,1)">slow in</option>
						<option value="cubic-bezier(0.4,0,0.2,1)">fast out - slow in</option>
						<optgroup label='Penner easings:'>
							<option value="cubic-bezier(.55,.055,.675,.19)">easeInCubic</option>
							<option value="cubic-bezier(.215,.61,.355,1)">easeOutCubic</option>
							<option value="cubic-bezier(.645,.045,.355,1)">easeInOutCubic</option>
							<option value="cubic-bezier(.6,.04,.98,.335)">easeInCirc</option>
							<option value="cubic-bezier(.075,.82,.165,1)">easeOutCirc</option>
							<option value="cubic-bezier(.785,.135,.15,.86)">easeInOutCirc</option>
							<option value="cubic-bezier(.95,.05,.795,.035)">easeInExpo</option>
							<option value="cubic-bezier(.19,1,.22,1)">easeOutExpo</option>
							<option value="cubic-bezier(1,0,0,1)">easeInOutExpo</option>
							<option value="cubic-bezier(.55,.085,.68,.53)">easeInQuad</option>
							<option value="cubic-bezier(.25,.46,.45,.94)">easeOutQuad</option>
							<option value="cubic-bezier(.455,.03,.515,.955)">easeInOutQuad</option>
							<option value="cubic-bezier(.895,.03,.685,.22)">easeInQuart</option>
							<option value="cubic-bezier(.165,.84,.44,1)">easeOutQuart</option>
							<option value="cubic-bezier(.77,0,.175,1)">easeInOutQuart</option>
							<option value="cubic-bezier(.755,.05,.855,.06)">easeInQuint</option>
							<option value="cubic-bezier(.23,1,.32,1)">easeOutQuint</option>
							<option value="cubic-bezier(.86,0,.07,1)">easeInOutQuint</option>
							<option value="cubic-bezier(.47,0,.745,.715)">easeInSine</option>
							<option value="cubic-bezier(.39,.575,.565,1)">easeOutSine</option>
							<option value="cubic-bezier(.445,.05,.55,.95)">easeInOutSine</option>
							<option value="cubic-bezier(.6,-.28,.735,.045)">easeInBack</option>
							<option value="cubic-bezier(.175, .885,.32,1.275)">easeOutBack</option>
							<option value="cubic-bezier(.68,-.55,.265,1.55)">easeInOutBack</option>
						</optgroup>
					</select>
				</span>
				<div class="row"><a href="#" id="vcam_create_btn" class="button">Create VCAM Transition</a><a href="#" id="vcam_reset_btn" class="button">reset VCAM</a></div>
				<textarea id="vcam_txt" class="output" cols="15" rows="10"></textarea>
			</div>			
			<div class="ui-info">
				Select element: 
				<select id="elem_sl">
					<option value="">Select</option>
				</select>
				<span class="ui-pos">x: 0px - y: 0px</span>
			</div>
			<div id="elementsProperties" class="controls elements-properties">
				<div class="left">
					<h2 id="element_lbl">Element: ?</h2>
					<span class="row"><strong>Element size and position:</strong></span>
					<span class="row"><label for="left_txt">X:</label> <input id="left_txt" type="number" size="4" value='0' class="numberInput" /><label for="top_txt"> Y:</label> <input id="top_txt" type="number" size="4" value='0' class="numberInput" /></span>
					<span class="row">Element alignment: 
						<select name="align_sl" id="align_sl">
							<option value="" selected >Select</option>
							<option value="top">top</option>
							<option value="bottom">bottom</option>
							<option value="left">left</option>
							<option value="right">right</option>
							<option value="center">center</option>
							<option value="middle">middle</option>
						</select>
					</span>
					<span class="row"><label for="w_txt">W:</label> <input id="w_txt" type="number" size="4" value='0' min="0" class="numberInput" /><label for="h_txt"> H:</label> <input id="h_txt" type="number" size="4" value='0' min="0" class="numberInput" /></span>
					<span class="row">Scale w/o transform: <input id="scale_txt" type="number" min="0" value='100' class="numberInput">%</span>
					<span class="row"><label for="opacity_rng">Opacity:</label> <input id="opacity_rng" type="range" value='100' min='0' max='100' /></span>
					<span class="row"><strong>Element background info:</strong></span>
					<span class="row"><label for="bgx_txt">X:</label> <input id="bgx_txt" type="number" size="4" value='0' class="numberInput" /><label for="bgy_txt"> Y:</label> <input id="bgy_txt" type="number" size="4" value='0' class="numberInput" /></span>
					<span class="row"><label for="bgw_txt">W:</label> <input id="bgw_txt" type="number" size="4" value='0' min="0" class="numberInput" /><label for="bgh_txt"> H:</label> <input id="bgh_txt" type="number" size="4" value='0' min="0" class="numberInput" /></span>
					<span class="row"><a href="#" id="trancissionerbutton" class="button">tranCiSSioner</a></span>
					<span class="row"><a href="#" id="spriteslicerbutton" class="button">SpriteSlicer</a></span>
				</div>
				<div class="right">
					<h2>Transform:</h2>
					<span class="row"><label for="sc_rng" class="lbl">Scale:</label> <input id="sc_rng" type="range" value='100' min='0' max='200' /></span>
					<span class="row"><label for="rot_rng" class="lbl">Rotation:</label> <input id="rot_rng" type="range" value='0' min='-180' max='180' /></span>
					<span class="row"><label for="sk_rng" class="lbl">Skew:</label> <input id="sk_rng" type="range" value='0' min='-60' max='60' /></span>
					<span class="row"><label for="rot_txt">Rotation: </label><input type="number" size="4" value='0' class="numberInput" id="rot_txt"> deg</span>
					<span class="row"><label for="scx_txt">Scale X:</label> <input id="scx_txt" type="number" size="4" value='1' class="numberInput" /><label for="scy_txt"> Scale Y:</label> <input id="scy_txt" type="number" size="4" value='1' class="numberInput" /></span>
					<span class="row"><label for="x_txt">Translate X:</label> <input id="x_txt" type="number" size="4" value='0' class="numberInput" />px</span>
					<span class="row"><label for="y_txt">Translate Y:</label> <input id="y_txt" type="number" size="4" value='0' class="numberInput" />px</span>
					<span class="row"><a href="#" id="switchLT2T" class="button">Switch left/top to translate</a></span>
					<div class="block-row">
						<h2>Transform Origin</h2>
						<div class="to_md">
							<div class="to_marker"></div>
						</div>
						<div class="to_ctrl">
						<span class="row">
							<select name="toPos_sl" id="toPos_sl">
							<option value="50% 50%" selected >center</option>
							<option value="50% 0%">top</option>
							<option value="50% 100%">bottom</option>
							<option value="0% 50%">left</option>
							<option value="100% 50%">right</option>
							</select>
						</span>
						<span class="row"><label for="tox_txt">X:</label> <input id="tox_txt" type="text" size="4" value='0' class="numberInput" /></span>
						<span class="row"><label for="toy_txt">Y:</label> <input id="toy_txt" type="text" size="4" value='0' class="numberInput" /></span>	
						</div>
					</div>
					<span class="row"><a href="#" id="resetbutton" class="button">RESET</a></span>
				</div>
			</div>
		<div class="row">Get your code (html/css):</div>
		<div class="row"><input id="onlycss_ck" type="checkbox" checked /><label for="onlycss_ck">Only CSS</label> | <input type="checkbox" id="toPos_ck" checked /><label for="toPos_ck">Transform Origin in %</label> | Scenes: <input type="number" id="scenes_txt" value="3" min="1" step="1" class="numberInput" /></div>
		<div class="row"><a href="#" id="create_btn" class="button">Create CSS</a></div>
		<div class="row">
			<textarea name="htmlOutput" id="htmlOutput_txt" class="output" cols="15" rows="10"></textarea>
		</div>
<textarea class="bnr">
/*
  _                
 | |__  _ __  _ __ 
 | '_ \| '_ \| '__|
 | |_) | | | | |   
 |_.__/|_| |_|_|   
                   
*/
var bnr = (function(){
		return {
		_D: {
			html5 : 'querySelector' in document && 'addEventListener' in window,
			ie : (navigator.userAgent.toLowerCase() != -1) ? parseInt(navigator.userAgent.toLowerCase().split('msie')[1]) : 0,
		},
		detect : function(val){return this._D[val]},
		ready: function(fn) {
			if (document.readyState === 'complete') {
				return fn();
			}
			document.addEventListener('DOMContentLoaded', fn, false);
			return this;
		},
		$:function(S){
			return document.getElementById(S) || document.getElementsByClassName(S) || document.getElementsByTagName(S) || document.querySelector(S) || document.querySelectorAll(S);
		},
		appendClass: function(el, c){
			el.className += ' ' + c;
		},
		setClass: function(el, c){
			el.className = c;
		},
		on: function(el,evt,f){
			el.addEventListener(evt,f,false);
		},
		off: function(el,evt,f){
			el.removeEventListener(evt,f,false);
		},
		_T : {
			F: 2000,
			L: 0,
			T: [],
			D: 0,
			M: null
		},
		timeline: function(val,fd){
			if (typeof val === 'string') {
		      var map = {
		        'loops': 	this._T.L,
		        'duration': this._T.D,
		        'timeline': this._T.M,
		        'now': ((!this._T.N)?0:new Date().getTime() - this._T.N)
		      };
		      return map[val];
		    }
		    if (typeof val === 'boolean' && val === false) {
		      for (var i = 0; i < this._T.T.length; i++) {
		        clearTimeout(this._T.T[i]);
		      }
		      return;
		    }
			this._T.T = [];
			this._T.D = 0;
			this._T.M = val;
			this._T.L++;
			if(fd){
				this._T.F = fd;
			}
			if(!this._T.N){
				this._T.N = new Date().getTime();
			}
			var me = this;
			for(var i = 0; i < val.length; i++){
				var f = val[i][1], ff = (val[i][0] < 10) ? val[i][0] * me._T.F : (!val[i][0])? me._T.F : val[i][0];
				this._T.T.push(setTimeout(f, me._T.D += Math.abs(ff)));
			}
		}
	};
})();
/*
              _                 _   _             
   __ _ _ __ (_)_ __ ___   __ _| |_(_) ___  _ __  
  / _` | '_ \| | '_ ` _ \ / _` | __| |/ _ \| '_ \ 
 | (_| | | | | | | | | | | (_| | |_| | (_) | | | |
  \__,_|_| |_|_|_| |_| |_|\__,_|\__|_|\___/|_| |_|
                                                  
*/
var $banner = bnr.$('banner')[0];
var $cta = bnr.$('cta')[0];
var frameDuration = 3000;
var tl = [
@SCENES@
];
@INIT@
@CTA@
	
</textarea>
		<p class="footer">&copy;2015 Emmanuel Ulloa</p>
		</div>
		<div id="stage-container" class="stage-container">
			<div id="stage" class="stage">
				<div id="vcam_ui" class="vcam_ui"></div>
			</div>
		</div>
	</div>
	</div>
<script type='text/javascript'>
$(function(){
	//http://www.html5rocks.com/en/tutorials/file/dndfiles/
	//http://blog.teamtreehouse.com/reading-files-using-the-html5-filereader-api
	//http://keithclark.co.uk/articles/calculating-element-vertex-data-from-css-transforms/
	var css = {
		container : {width:550,height:400,bgColor:'#FFF',borderColor:'#666'},
		background : {file:null},
		layers : [],
		images : {},
		imgSizes : {},
		layerTransforms : {},
		currentLayer : null
	}
	var $stage = $('#stage'),
		$vcam_ui = $('#vcam_ui'),
		$uiPos = $('.ui-pos'),
		$size_sl = $('#size_sl'),
		$width_txt = $('#width_txt'),
		$height_txt = $('#height_txt'),
		$guide_fl = $('#guide_fl');
	//FUNCTIONS
	function $id(i){
		return document.getElementById(i);
	}
	var depth = 0;
	function getNextHighestDepth(){
		return ++depth;
	}
	var counter = 0, filesMax = 0;
	var I_LAYER = '_iLayer';
	var O_LAYER = '_oLayer';
	function createLayer(files){
		filesMax = files.length;
		for(var i=0; i < files.length; i++){
			var file = files[i];
			if (file.type.match(/image.*/)){
				var reader = new FileReader();
				reader.onload = (function(file){
					return function(evt){
						++counter;
						var img = new Image();
						img.src = evt.target.result;
						var name = file.name.split('.')[0];
						css.images[name] = file.name;
						var draggableLayer = document.createElement('div');
						var opacityLayer = document.createElement('div');
						var imageLayer = document.createElement('div');
						//for events this is the layer you want to target, it also holds the className = layer and the selected border. This layer is the one to use to obtain left and top values
						draggableLayer.id = name;
						draggableLayer.className = 'layer';
						draggableLayer.style.left = '0px';
						draggableLayer.style.top = '0px';
						//this layer holds opacity, transform-origin and transformations
						opacityLayer.id = name + O_LAYER;
						//this layer holds image-background, image-position, width, height
						imageLayer.id = name + I_LAYER;
						imageLayer.style.backgroundImage = 'url(' + img.src + ')';
						imageLayer.style.backgroundRepeat = 'no-repeat';
						imageLayer.style.backgroundPosition = '0px 0px';
						imageLayer.style.backgroundSize = img.width + 'px ' + img.height + 'px';
						imageLayer.style.width = img.width + 'px';
						imageLayer.style.height = img.height + 'px';
						css.imgSizes[name] = {width:img.width,height:img.height,scale:1};
						delete img;
						//Let's assemble
						opacityLayer.appendChild(imageLayer);
						draggableLayer.appendChild(opacityLayer);
						$stage.append(draggableLayer);
						var $draggableLayer = $(draggableLayer);
						$draggableLayer.draggable({
							start:onDragStart
						},{
							stop:onDragStop
						});
						$draggableLayer.click(function(evt){
							var layer = getLayer(evt.target.id);
							if(layer === this){
								if($(layer).is('.ui-draggable-dragging')){
									return;
								}
								selectLayer(layer);
							}
							return;
						});
						css.layerTransforms[name] = {};
						css.layers.push(draggableLayer);
						if(counter == filesMax){
							selectLayer(getLayer(name));
							openTools();
						}
						populateSelectMenu();
					}
				})(file);
				reader.readAsDataURL(file);
			}	
		}
	}
	function getLayer(id){
		if(id.indexOf(I_LAYER) !== -1){
			return $id(id.replace(I_LAYER, ''));
		}else if(id.indexOf(O_LAYER) !== -1){
			return $id(id.replace(O_LAYER, ''));
		}
		return $id(id);
	}
	function fixDecimal(val){
		return Math.round(val*1000)/1000;
	}
	/* VCAM start*/
	$('#use_vcam_ck').click(function(evt){
		var $this = $(evt.target);
		var $vcam_controls = $('#vcam');
		changeVCAMSize();
		if($this.prop('checked')){
			$vcam_controls.slideDown();
			$vcam_ui.css('display', 'block');
		}else{
			$vcam_controls.slideUp();
			$vcam_ui.css('display', 'none');
		}
	});
	var vcamOb = {pan:0, tilt:0, zoom:1, roll:0};
	$('#pan_txt, #tilt_txt, #zoom_txt, #roll_txt').change(function(evt){
		var $this = $(evt.target);
		var id = $this.prop('id');
		var wkm = new WebKitCSSMatrix(window.getComputedStyle(document.getElementById('vcam_ui'))['-webkit-transform']);
		var val = parseFloat($this.val());
		if(id == 'pan_txt'){
			vcamOb.pan = val;
			wkm = wkm.translate(val, 0, 0);
		}
		if(id == 'tilt_txt'){
			vcamOb.tilt = val;
			wkm = wkm.translate(0, val, 0);
		}
		if(id == 'zoom_txt'){
			vcamOb.zoom = val;
			wkm.a += val;
			wkm.d += val;
		}
		if(id == 'roll_txt'){
			vcamOb.roll = val;
			wkm = wkm.rotate(0, 0, val);
		}
		$vcam_ui.css('-webkit-transform', wkm.toString());
	});
	$('#pan_lt, #pan_gt, #tilt_lt, #tilt_gt, #zoom_lt, #zoom_gt, #roll_lt, #roll_gt').click(function(evt){
		evt.preventDefault();
		evt.stopPropagation();
		var $this = $(evt.target);
		var id = $this.prop('id');
		var factor = (evt.shiftKey)?10:1;
		var wkm = new WebKitCSSMatrix(window.getComputedStyle(document.getElementById('vcam_ui'))['-webkit-transform']);

		if(id == 'pan_lt'){
			vcamOb.pan += fixDecimal(-1 * factor);
			wkm = wkm.translate(fixDecimal(-1 * factor), 0, 0);
		}
		if(id == 'pan_gt'){
			vcamOb.pan += fixDecimal(1 * factor);
			wkm = wkm.translate(fixDecimal(1 * factor), 0, 0);
		}
		if(id == 'tilt_lt'){
			vcamOb.tilt += fixDecimal(-1 * factor);
			wkm = wkm.translate(0, fixDecimal(-1 * factor), 0);
		}
		if(id == 'tilt_gt'){
			vcamOb.tilt += fixDecimal(1 * factor);
			wkm = wkm.translate(0, fixDecimal(1 * factor), 0);
		}
		if(id == 'zoom_lt'){
			vcamOb.zoom += 0.1;
			wkm.a += 0.1;
			wkm.d += 0.1;
		}
		if(id == 'zoom_gt'){
			vcamOb.zoom += -0.1;
			wkm.a += -0.1;
			wkm.d += -0.1;
		}
		if(id == 'roll_lt'){
			vcamOb.roll += fixDecimal(-1 * factor);
			wkm = wkm.rotate(0, 0, fixDecimal(-1 * factor));
		}
		if(id == 'roll_gt'){
			vcamOb.roll += fixDecimal(1 * factor);
			wkm = wkm.rotate(0, 0, fixDecimal(1 * factor));
		}
		$vcam_ui.css('-webkit-transform', wkm.toString());
		$('#pan_txt').val(vcamOb.pan);
		$('#tilt_txt').val(vcamOb.tilt);
		$('#zoom_txt').val(vcamOb.zoom);
		$('#roll_txt').val(vcamOb.roll);
		//console.log(wkm.toString());
	});
	$('#vcam_reset_btn').click(function(evt){
		vcamOb = {pan:0, tilt:0, zoom:1, roll:0};
		$('#pan_txt, #tilt_txt, #roll_txt').val('0');
		$('#zoom_txt').val('1');
		$vcam_ui.css('-webkit-transform', 'none');
	});
	$('#vcam_create_btn').click(function(evt){
		evt.preventDefault();
		evt.stopPropagation();
		vcamCode();
		$('#vcam_capture').css('display', '');
	});
	$('#vcam_capture').click(function(evt){
		var $vcam_txt  = $('#vcam_txt');
		var scene = $('#vcam_scene').val();
		$('#vcam_scene').val(parseInt(scene) + 1);
		var s = $vcam_txt.val() + vcamCapture();
		$vcam_txt.val(s);
		$vcam_txt.select();
	});
	$('#vcam_matrix').keypress(function (e) {
	  if (e.which == 13) {
	    var wkmatrix = new WebKitCSSMatrix($('#vcam_matrix').val());
	    $vcam_ui.css('-webkit-transform', wkmatrix.toString());
	    return false;
	  }
	});
	function changeVCAMSize(){
		$vcam_ui.css('width', css.container.width + 'px').css('height', css.container.height + 'px');
	}
	function vcamCapture(){
		var name = $('#vcam_name').val();
		var scene = $('#vcam_scene').val();
		var duration = $('#vcam_duration_in_txt').val();
		var delay = $('#vcam_delay_in_txt').val();
		var ease = $('#vcam_ease_in_sl').val();
		var wkmatrix = new WebKitCSSMatrix(window.getComputedStyle(document.getElementById('vcam_ui'))['-webkit-transform']);
		var ormatrix = wkmatrix.toString();
		wkmatrix = wkmatrix.inverse();
		var s = '',
			_n = '\n',
			_t = '\t';
		s += '/* ' + name + ' ' + ormatrix + ' */' + _n;
		s += '.scene' + scene + ' .' + name +  '{' + _n;
		s += _t + 'transform: ' + wkmatrix.toString() + ';' + _n;
		s += _t + '-webkit-transform: ' + wkmatrix.toString() + ';' + _n;
		s += _t + '-ms-transform: ' + wkmatrix.toString() + ';' + _n;
		s += _t + 'transition: transform ' + duration + 's ' + ease + ((delay == '0')?'':' ' + delay + 's') + ';' + _n;
		s += _t + '-webkit-transition: -webkit-transform ' + duration + 's ' + ease + ((delay == '0')?'':' ' + delay + 's') + ';' + _n;
		s += '}' + _n;
		return s;
	}
	function vcamCode(){
		var s = '',
			_n = '\n',
			_t = '\t';
		var name = $('#vcam_name').val();
		s += '.' + name + '{' + _n;
		s += _t + 'display: block;' + _n;
		s += _t + 'width: ' + css.container.width + 'px;' + _n;
		s += _t + 'height: ' + css.container.height + 'px;' + _n;
		s += '}' + _n;
		s += vcamCapture();
		var $vcam_txt  = $('#vcam_txt');
		$vcam_txt.val(s);
		$vcam_txt.select();
	}
	/* VCAM end*/
	function openTools(){
		$('#elementsProperties').slideDown();
	}
	function changeSize(w,h){
		css.container.width = w;
		css.container.height = h;
		$width_txt.val(css.container.width);
		$height_txt.val(css.container.height);
		$stage.css('width', css.container.width + 'px').css('height', css.container.height + 'px');
		changeVCAMSize();
	}
	function changeColors(bg,col){
		css.container.bgColor = bg;
		css.container.borderColor = col;
		$('.ss_container').css('background-image', 'none');
		$('.ss_container').css('background-color', bg);
		$stage.css('background-color', bg).css('border-color',col);
		$('.to_md').css('background-color', bg);
	}
	function setLayerBorder($layer, op){
		$layer.css('border', '1px dashed rgba(255, 0, 255, ' + (1 - op) + ')');
	}
	function deselect(){
		$('.layer').each(function(i,element){
			$(element).removeClass('selected');
		});
	}
	function selectLayer(el){
		deselect();
		css.currentLayer = $(el);
		css.currentLayer.focus();
		css.currentLayer.addClass('selected');
		css.currentLayer.css('z-index',getNextHighestDepth());
		updateHUD(css.currentLayer);
	}
	function updateHUD($layer){
		var name = $layer.attr('id');
		var $iLayer = $('#' + name + I_LAYER);
		var $oLayer = $('#' + name + O_LAYER);
		var layerTransform = css.layerTransforms[name];
		$('#element_lbl').text('Element: ' + $layer.attr('id') + ' ' + $iLayer.css('width') + ' x ' + $iLayer.css('height'));
		$('#left_txt').val($layer.css('left').replace('px',''));
		$('#top_txt').val($layer.css('top').replace('px',''));
		var op = parseFloat($iLayer.css('opacity'));
		$('#opacity_rng').val(Math.round(op * 100) + '');
		setLayerBorder($oLayer,op);
		$('#w_txt').val($iLayer.css('width').replace('px',''));
		$('#h_txt').val($iLayer.css('height').replace('px',''));
		var bgsize = $iLayer.css('background-size').split(' ');
		$('#bgw_txt').val(bgsize[0].replace('px',''));
		$('#bgh_txt').val(bgsize[1].replace('px',''));
		var bgpos = $iLayer.css('background-position').split(' ');
		$('#bgx_txt').val(bgpos[0].replace('px',''));
		$('#bgy_txt').val(bgpos[1].replace('px',''));
		//Transform Origin thumbnail
		var w = parseFloat($iLayer.css('width')), 
			h = parseFloat($iLayer.css('height')), 
			b = Math.max(w,h), 
			ratio = 1, 
			bgSize = {width:100,height:100};
		if(b == w){
			ratio = (100/w);
			bgSize.height = ratio * h;
		}else{
			ratio = (100/h);
			bgSize.width = ratio * w;
		}
		$('.to_md').css('background-image', $iLayer.css('background-image'));
		$('.to_md').css('background-repeat', 'no-repeat');
		$('.to_md').css('background-size', bgSize.width + 'px ' + bgSize.height + 'px');
		var to = getElementProp($layer, 'transform-origin').split(' ');//$iLayer.css('transform-origin').split(' ');
		$('#tox_txt').val(to[0]);
		$('#toy_txt').val(to[1]);
		var tox = parseFloat(to[0]);
		var toy = parseFloat(to[1]);
		var rx = tox/w, ry = toy/h;
		$('.to_marker').css('left', Math.round(rx * bgSize.width) + 'px');
		$('.to_marker').css('top', Math.round(ry * bgSize.height) + 'px');
		//TRANSFORMS
		if(layerTransform.translate){
			$('#x_txt').val(layerTransform.translate.x);
			$('#y_txt').val(layerTransform.translate.y);
		}else{
			$('#x_txt').val('0');
			$('#y_txt').val('0');
		}
		if(layerTransform.scale){
			if(layerTransform.scale.x == layerTransform.scale.y){
				$('#sc_rng').val((layerTransform.scale.x * 100));
			}
			$('#scx_txt').val(parseFloat(layerTransform.scale.x));
			$('#scy_txt').val(parseFloat(layerTransform.scale.y));
		}else{
			$('#scx_txt').val('1');
			$('#scy_txt').val('1');
		}
		if(layerTransform.rotate){
			$('#rot_rng').val(layerTransform.rotate);
			$('#rot_txt').val(layerTransform.rotate);
		}else{
			$('#rot_rng').val('0');
			$('#rot_txt').val('0');
		}
		if(layerTransform.skew){
			$('#sk_rng').val(layerTransform.skew);
		}else{
			$('#sk_rng').val('0');
		}
		$('#htmlOutput_txt').val(createHTML());
	}
	function onHUDEvents(){
		$stage.on('mousemove', function(evt){
			var posX = Math.round(evt.pageX - $stage.offset().left);
			var posY = Math.round(evt.pageY - $stage.offset().top);
			$uiPos.text('x: ' + posX + ' - y: ' + posY);
		});
		$('.to_md').click(function(evt){
			if(evt.target === this){
				evt = evt || window.event;
			    var target = evt.target || evt.srcElement,
			        rect = target.getBoundingClientRect(),
			        offsetX = evt.clientX - rect.left,
			        offsetY = evt.clientY - rect.top;
			    	rx = offsetX - 3,
			    	ry = offsetY - 3;
			    var w = parseFloat(css.currentLayer.css('width')),
			    	h = parseFloat(css.currentLayer.css('height')),
			    	$iLayer = $('#' + css.currentLayer.attr('id') + I_LAYER); 
			    $iLayer.css('transform-origin', Math.round(rx/100 * w) + 'px ' + Math.round(ry/100 * h) + 'px');
			    updateHUD(css.currentLayer);
			}
		});
		$('#left_txt').change(function(evt){
			var $this = $(evt.target);
			$('#' + css.currentLayer.attr('id')).css('left', $this.val() + 'px');
		});
		$('#top_txt').change(function(evt){
			var $this = $(evt.target);
			$('#' + css.currentLayer.attr('id')).css('top', $this.val() + 'px');
		});
		$('#w_txt').change(function(evt){
			var $this = $(evt.target),
				$iLayer = $('#' + css.currentLayer.attr('id') + I_LAYER);
			$iLayer.css('width', $this.val() + 'px');
			updateHUD(css.currentLayer);
		});
		$('#h_txt').change(function(evt){
			var $this = $(evt.target),
				$iLayer = $('#' + css.currentLayer.attr('id') + I_LAYER);
			$iLayer.css('height', $this.val() + 'px');
			updateHUD(css.currentLayer);
		});
		$('#bgw_txt').change(function(evt){
			var $this = $(evt.target),
				$iLayer = $('#' + css.currentLayer.attr('id') + I_LAYER);
			var sz = $iLayer.css('background-size').split(' ');
			$iLayer.css('background-size', $this.val() + 'px ' + sz[1]);
			updateHUD(css.currentLayer);
		});
		$('#bgh_txt').change(function(evt){
			var $this = $(evt.target),
				$iLayer = $('#' + css.currentLayer.attr('id') + I_LAYER);
			var sz = $iLayer.css('background-size').split(' ');
			$iLayer.css('background-size', sz[0] + ' ' + $this.val() + 'px');
			updateHUD(css.currentLayer);
		});
		$('#bgx_txt').change(function(evt){
			var $this = $(evt.target),
				$iLayer = $('#' + css.currentLayer.attr('id') + I_LAYER);
			var ps = $iLayer.css('background-position').split(' ');
			$iLayer.css('background-position', $this.val() + 'px ' + ps[1]);
			updateHUD(css.currentLayer);
		});
		$('#bgy_txt').change(function(evt){
			var $this = $(evt.target),
				$iLayer = $('#' + css.currentLayer.attr('id') + I_LAYER);
			var ps = $iLayer.css('background-position').split(' ');
			$iLayer.css('background-position', ps[0] + ' ' + $this.val() + 'px');
			updateHUD(css.currentLayer);
		});
		$('#tox_txt').change(function(evt){
			var $this = $(evt.target),
				$iLayer = $('#' + css.currentLayer.attr('id') + I_LAYER);
			var to = $iLayer.css('transform-origin').split(' ');
			$iLayer.css('transform-origin', $this.val() + 'px ' + to[1]);
			updateHUD(css.currentLayer);
		});
		$('#toy_txt').change(function(evt){
			var $this = $(evt.target),
				$iLayer = $('#' + css.currentLayer.attr('id') + I_LAYER);
			var to = $iLayer.css('transform-origin').split(' ');
			$iLayer.css('transform-origin', to[0] + ' ' + $this.val() + 'px');
			updateHUD(css.currentLayer);
		});
		$('#opacity_rng').change(function(evt){
			var $this = $(evt.target);
			var op = (parseFloat($this.val()) / 100);
			css.currentLayer.find('#' + css.currentLayer.attr('id') + I_LAYER).css('opacity',op);
			updateHUD(css.currentLayer);
		})
		//TRANSFORM
		$('#rot_rng').change(function(evt){
			var $this = $(evt.target);
			var $iLayer = $('#' + css.currentLayer.attr('id') + I_LAYER);
			var layerTransform = css.layerTransforms[css.currentLayer.attr('id')];
			if(!layerTransform.rotate){
				layerTransform.rotate = 0;
			}
			layerTransform.rotate = parseFloat($this.val());
			$iLayer.css('transform', createTransform(layerTransform));
			$iLayer.css('-webkit-transform', createTransform(layerTransform));
			updateHUD(css.currentLayer);
		});
		$('#rot_txt').change(function(evt){
			var $this = $(evt.target);
			var $iLayer = $('#' + css.currentLayer.attr('id') + I_LAYER);
			var layerTransform = css.layerTransforms[css.currentLayer.attr('id')];
			if(!layerTransform.rotate){
				layerTransform.rotate = 0;
			}
			layerTransform.rotate = parseFloat($this.val());
			$iLayer.css('transform', createTransform(layerTransform));
			$iLayer.css('-webkit-transform', createTransform(layerTransform));
			updateHUD(css.currentLayer);
		});
		$('#sc_rng').change(function(evt){
			var $this = $(evt.target);
			var $iLayer = $('#' + css.currentLayer.attr('id') + I_LAYER);
			var layerTransform = css.layerTransforms[css.currentLayer.attr('id')];
			if(!layerTransform.scale){
				layerTransform.scale = {x:1,y:1};
			}
			layerTransform.scale.x = parseFloat($this.val()) / 100;
			layerTransform.scale.y = parseFloat($this.val()) / 100;
			$iLayer.css('transform', createTransform(layerTransform));
			$iLayer.css('-webkit-transform', createTransform(layerTransform));
			updateHUD(css.currentLayer);
		});
		$('#sk_rng').change(function(evt){
			var $this = $(evt.target);
			var $iLayer = $('#' + css.currentLayer.attr('id') + I_LAYER);
			var layerTransform = css.layerTransforms[css.currentLayer.attr('id')];
			if(!layerTransform.skew){
				layerTransform.skew = 0;
			}
			layerTransform.skew = parseFloat($this.val());
			$iLayer.css('transform', createTransform(layerTransform));
			$iLayer.css('-webkit-transform', createTransform(layerTransform));
			updateHUD(css.currentLayer);
		});
		$('#x_txt').change(function(evt){
			var $this = $(evt.target);
			var $iLayer = $('#' + css.currentLayer.attr('id') + I_LAYER);
			var layerTransform = css.layerTransforms[css.currentLayer.attr('id')];
			if(!layerTransform.translate){
				layerTransform.translate = {x:0,y:0};
			}
			layerTransform.translate.x = parseFloat($this.val());
			$iLayer.css('transform', createTransform(layerTransform));
			$iLayer.css('-webkit-transform', createTransform(layerTransform));
			updateHUD(css.currentLayer);
		});
		$('#y_txt').change(function(evt){
			var $this = $(evt.target);
			var $iLayer = $('#' + css.currentLayer.attr('id') + I_LAYER);
			var layerTransform = css.layerTransforms[css.currentLayer.attr('id')];
			if(!layerTransform.translate){
				layerTransform.translate = {x:0,y:0};
			}
			layerTransform.translate.y = parseFloat($this.val());
			$iLayer.css('transform', createTransform(layerTransform));
			$iLayer.currentLayer.css('-webkit-transform', createTransform(layerTransform));
			updateHUD(css.currentLayer);
		});
		$('#scx_txt').change(function(evt){
			var $this = $(evt.target);
			var $iLayer = $('#' + css.currentLayer.attr('id') + I_LAYER);
			var layerTransform = css.layerTransforms[css.currentLayer.attr('id')];
			if(!layerTransform.scale){
				layerTransform.scale = {x:1,y:1};
			}
			layerTransform.scale.x = parseFloat($this.val());
			$iLayer.css('transform', createTransform(layerTransform));
			$iLayer.css('-webkit-transform', createTransform(layerTransform));
			updateHUD(css.currentLayer);
		});
		$('#scy_txt').change(function(evt){
			var $this = $(evt.target);
			var $iLayer = $('#' + css.currentLayer.attr('id') + I_LAYER);
			var layerTransform = css.layerTransforms[css.currentLayer.attr('id')];
			if(!layerTransform.scale){
				layerTransform.scale = {x:1,y:1};
			}
			layerTransform.scale.y = parseFloat($this.val());
			$iLayer.css('transform', createTransform(layerTransform));
			$iLayer.css('-webkit-transform', createTransform(layerTransform));
			updateHUD(css.currentLayer);
		});
		$('#scale_txt').change(function(evt){
			var $this = $(evt.target);
			var ratio = parseFloat($this.val())/100;
			var name = css.currentLayer.attr('id');
			css.imgSizes[name].scale = ratio;
			var w = fixDecimal(css.imgSizes[name].width * css.imgSizes[name].scale) + 'px';
			var h = fixDecimal(css.imgSizes[name].height * css.imgSizes[name].scale) + 'px';
			var $iLayer = $('#' + css.currentLayer.attr('id') + I_LAYER);
			$iLayer.css('width', w);
			$iLayer.css('height', h);
			$iLayer.css('background-size', w + ' ' + h);
			updateHUD(css.currentLayer);
		});
		$('#toPos_sl').change(function(evt){
			var $this = $(evt.target);
			var img = getElementProp(css.currentLayer, 'image');
			img.css('transform-origin', $this.val());
			updateHUD(css.currentLayer);
		});
		$('#align_sl').change(function(evt){
			var val = $(evt.target).val();
			var name = css.currentLayer.attr('id');
			var w = getElementProp(css.currentLayer, 'width');
			var h = getElementProp(css.currentLayer, 'height');
			var sw = css.container.width;
			var sh = css.container.height;
			if(val === 'top'){
				css.currentLayer.css('top','0px');
			}
			if(val === 'bottom'){
				css.currentLayer.css('top', (sh - h) + 'px');
			}
			if(val === 'left'){
				css.currentLayer.css('left','0px');
			}
			if(val === 'right'){
				css.currentLayer.css('left', (sw - w) + 'px');
			}
			if(val === 'center'){
				css.currentLayer.css('left', Math.round((sw - w)/2) + 'px');
			}
			if(val === 'middle'){
				css.currentLayer.css('top', Math.round((sh - h)/2) + 'px');
			}
			updateHUD(css.currentLayer);
		});
		$('#switchLT2T').click(function(evt){
			var $x = $('#left_txt'), $y = $('#top_txt'), $tx = $('#x_txt'), $ty = $('#y_txt');
			$tx.val($x.val());
			$ty.val($y.val());
			$x.val('0');
			$y.val('0');
			css.currentLayer.css('top', '0px');
			css.currentLayer.css('left', '0px');
			setTranslate({x:parseFloat($tx.val()),y:parseFloat($ty.val())});
			evt.preventDefault();
		});
		$('#create_btn').click(function(evt){
			$('#htmlOutput_txt').val(createHTML());
			$('#htmlOutput_txt').select();
			evt.preventDefault();
		});
		$(document).keyup(function(evt){
			evt.stopPropagation();
			evt.stopImmediatePropagation();
    		evt.preventDefault();
			if(evt.which > 36 && evt.which < 41){
				css.currentLayer.focus();
				var top = parseFloat(css.currentLayer.css('top'));
				var left = parseFloat(css.currentLayer.css('left'));
				top = isNaN(top)?0:top;
				left = isNaN(left)?0:left;
				var step = (evt.shiftKey) ? 10 : 1;
				var name = css.currentLayer.attr('id');
				var layerTransform = css.layerTransforms[name];
				var $iLayer = $('#' + name + I_LAYER);
				if(evt.altKey){
					switch(evt.which){
						case 38:
							if(!layerTransform.scale){
								layerTransform.scale = {x:1,y:1}
							}
							step = (evt.shiftKey) ? 0.5 : 0.1;
							layerTransform.scale.x += step;
							layerTransform.scale.y += step;
						break;
						case 40:
							if(!layerTransform.scale){
								layerTransform.scale = {x:1,y:1}
							}
							step = (evt.shiftKey) ? 0.5 : 0.1;
							layerTransform.scale.x -= step;
							layerTransform.scale.y -= step;
						break;
						case 37:
							if(!layerTransform.rotate){
								layerTransform.rotate = 0
							}
							layerTransform.rotate -= step;
							layerTransform.rotate -= step;
						break;
						case 39:
							if(!layerTransform.rotate){
								layerTransform.rotate = 0
							}
							layerTransform.rotate += step;
							layerTransform.rotate += step;
						break;
					}
					$iLayer.css('transform', createTransform(layerTransform));
					$iLayer.css('-webkit-transform', createTransform(layerTransform));
				}else{
					switch(evt.which){
						case 38:
							css.currentLayer.css('top', (top + (step * -1)) + 'px' );
						break;
						case 40:
							css.currentLayer.css('top', (top + step) + 'px' );
						break;
						case 37:
							css.currentLayer.css('left', (left + (step * -1)) + 'px' );
						break;
						case 39:
							css.currentLayer.css('left', (left + step) + 'px' );
						break;
					}					
				}
				updateHUD(css.currentLayer);
			}
			return false;
		});/**/
		$('#resetbutton').click(function(evt){
			var name = css.currentLayer.attr('id');
			var layerTransform = css.layerTransforms[name];
			var $iLayer = $('#' + name + I_LAYER);
			layerTransform = {};
			$iLayer.css('transform','none');
			$iLayer.css('-webkit-transform','none');
			//$iLayer.css('opacity','1');
			updateHUD(css.currentLayer);
			evt.preventDefault();
			evt.stopPropagation();
		});
		$('#htmlOutput').click(function(evt){
			$(this).select();
		})
	}
	function setTranslate(val){
		var $iLayer = $('#' + css.currentLayer.attr('id') + I_LAYER);
		var layerTransform = css.layerTransforms[css.currentLayer.attr('id')];
		if(!layerTransform.translate){
			layerTransform.translate = {x:0,y:0};
		}
		layerTransform.translate.x = val.x;
		layerTransform.translate.y = val.y;
		var ct = createTransform(layerTransform);
		console.log(ct);
		$iLayer.css('transform', ct);
		$iLayer.css('-webkit-transform', ct);
		updateHUD(css.currentLayer);
	}
  	function createTransform(o){
		var s = '';
			if('translate' in o || 'translateX' in o || 'translateY' in o || 'translateZ' in o || 'rotate' in o || 'skew' in o || 'scale' in o || 'scaleX' in o || 'scaleY' in o || 'perspective' in o || 'scale3d' in o || 'translate3d' in o || 'rotate3d' in o || 'rotateX' in o || 'rotateY' in o || 'rotateZ' in o){
				if('perspective' in o){
					s += o['perspective'];
				}
				if('translate3d' in o){
					s += o['translate3d'];
				}
				if('scale3d' in o){
					s += o['scale3d'];
				}
				if('rotate3d' in o){
					s += o['rotate3d'];
				}
				if('rotateX' in o){
					s += 'rotateX(' + o['rotateX'] + ') ';
				}
				if('rotateY' in o){
					s += 'rotateY(' + o['rotateY']+ ') ';
				}
				if('rotateZ' in o){
					s += 'rotateZ(' + o['rotateZ']+ ') ';
				}
				if('translateZ' in o){
					s += o['translateZ'];
				}
				if('translateX' in o && 'translateY' in o){
					s += 'translate('+ o['translateX'] + 'px, ' + o['translateY'] + 'px) ' ;
				}else{
					if('translateX' in o){
						s += 'translateX(' + o['translateX'] + ') ' ;
					}
					if('translateY' in o){
						s += 'translateY(' + o['translateY'] + ') ';
					}				
				}
				if('translate' in o){
					s += 'translate(' + o['translate']['x'] + 'px,' + o['translate']['y'] + 'px) ';
				}
				if('scaleX' in o){
					s += o['scaleX'];
				}
				if('scaleY' in o){
					s += o['scaleY'];
				}
				if('scale' in o){
					s += 'scale('+o['scale']['x']+','+o['scale']['y']+') ';
				}
				if('rotate' in o){
					s += 'rotate('+ o['rotate'] +'deg) ';
				}
				if('skew' in o){
					s += 'skew('+ o['skew'] +'deg) ';
				}
			}
		return s;
	}
	function createHTML(){
		var onlycss = $('#onlycss_ck').prop('checked');
		var s = '',
			_n = '\n',
			_t = '\t';
		var zcript = 'script';
		var cta = '';
		var initFoo = '';
		var bnrjs = $('.bnr').val();
		var name = $('#banner_txt').val() + css.container.width + 'x' + css.container.height;
		var rm = $('#rm_sl').val();
		var scenes = parseInt($('#scenes_txt').val());
		if(!onlycss){
			s += '<!DOCTYPE html>' + _n;
			s += '<html lang="en">' + _n;
			s += '<head>' + _n;
			s += '<meta charset="UTF-8">' + _n;
			s += '<meta name="ad.size" content="width='+css.container.width+',height='+css.container.height+'">' + _n;
			s += '<title>'+ name +'</title>' + _n;
			if(rm == 'dcm'){
				s += '<'+zcript+' type="text/javascript">var clickTag = "http://www.google.com"</'+zcript+'>'+ _n;
			}
			if(rm == 'dc'){
				s += '<'+zcript+' src="http://s0.2mdn.net/ads/studio/Enabler.js" type="text/javascript"></'+zcript+'>' + _n;
			}
			s += '<style type="text/css">' + _n;	
		}

		s += createCSS();

		if(!onlycss){
			s += '</style>' + _n;
			s += '</head>' + _n;
			s += '<body>' + _n;
			if(rm == 'atlas'){
				s += '<a href="{{PUB_CLICKTHROUGH}}" target="_blank">' + _n;
			}
			s += '<div class="banner">' + _n;
			s += '<div class="' + $('#vcam_name').val() + '">' + _n;
			for(var i = 0; i < css.layers.length; i++){
				s += _t + '<div class="' + $(css.layers[i]).attr('id') + '"></div>' + _n;
			}
			s += '</div>' + _n;
			s += '</div>' + _n;
			if(rm == 'atlas'){
				s += '</a>' + _n;
			}
			var scenesCode = '';
			for(var i = 1; i <= scenes; i++ ){
				var dur = (i == 1)?'0':'';
				scenesCode += _t + "["+dur+",function(){bnr.appendClass($banner,'scene" + i + "');}]";
				if(i < scenes){
					scenesCode += ',';
				}
				scenesCode += _n;
			}
			bnrjs = bnrjs.replace('@SCENES@', scenesCode);
			if(rm == 'dc'){
				initFoo += 'if (Enabler.isInitialized()) {' + _n;
				initFoo += 'bnr.timeline(tl,frameDuration);' + _n;
				initFoo += '}else{' + _n + 'Enabler.addEventListener(studio.events.StudioEvent.INIT, function(){bnr.timeline(tl,frameDuration);});' + _n + '}';
				bnrjs = bnrjs.replace('@INIT@', initFoo);
			}else if(rm == 'flashtalking'){
				initFoo += 'var myFT = new FT();' + _n;
				initFoo += "myFT.addEventListener('ready', function(){bnr.timeline(tl,frameDuration);});" + _n;
				cta += 'myFT.applyClickTag($banner, 1);'+ _n;
				bnrjs = bnrjs.replace('@INIT@', initFoo);
				bnrjs = bnrjs.replace('@CTA@', cta);
			}else{
				bnrjs = bnrjs.replace('@INIT@', 'bnr.timeline(tl,frameDuration);');
			}
			if(rm == 'dcm'){
				cta += "bnr.on($banner,'click', function(){ window.open(window.clickTag); });" + _n;
				bnrjs = bnrjs.replace('@CTA@', cta);
			}else if(rm == 'dc'){
				cta += "bnr.on($banner,'click', function(){ Enabler.exit('clickTag'); });" + _n;
				bnrjs = bnrjs.replace('@CTA@', cta);
			}else{
				bnrjs = bnrjs.replace('@CTA@', '');
			}
			/*
	<!--[if lte IE 9]>
	<div class="ie9">Show backup image</div>
	<![endif]-->
			*/
			if(rm == 'flashtalking'){
				s += '<!--' + _n;
				s += '/* save as manifest.js */' + _n;
				s += 'FT.manifest({"filename":"'+name+'.html","width":"'+css.container.width+'","height":"'+css.container.height+'","clickTagCount":1});' + _n;
				s += '-->' + _n;
				s += '<'+zcript+' src="http://cdn.flashtalking.com/frameworks/js/api/2/8/html5API.js"></'+zcript+'>' + _n;
			}
			s += '<'+zcript+'  type="text/javascript">' + _n + bnrjs + _n + '</'+zcript+'>' + _n;
			s += '</body>' + _n;
			s += '</html>' + _n;			
		}
		return s;
	}
	function getScale(transform){
		var matrixArr = transform.replace('matrix(', '').replace(')', '').split(',');
		return {x: parseFloat(matrixArr[0]), y: parseFloat(matrixArr[3])};
	}
	function getElementProp(id, prop){
		var $layer = (typeof id === 'string')?$(id):id;
		var name = $layer.attr('id');
		var $iLayer = $('#' + name + I_LAYER);
		var $oLayer = $('#' + name + O_LAYER);
		if(prop == 'image'){
			return $iLayer;
		}
		if(prop == 'background-position'){
			return $iLayer.css('background-position');
		}
		if(prop == 'background-size'){
			return $iLayer.css('background-size');
		}
		if(prop == 'width'){
			return parseInt($layer.css('width')) - 2;
		}
		if(prop == 'height'){
			return parseInt($layer.css('height')) - 2;
		}
		if(prop == 'left'){
			return parseInt($layer.css('left'));
		}
		if(prop == 'top'){
			return parseInt($layer.css('top'));
		}
		if(prop == 'imageWidth'){
			return css.imgSizes[name].width;
		}
		if(prop == 'imageHeight'){
			return css.imgSizes[name].height;
		}
		if(prop == 'fileName'){
			return css.images[name];
		}
		if(prop == 'transform'){
			return $iLayer.css('transform') || $iLayer.css('-webkit-transform');
		}
		if(prop == 'transform-origin' || prop == 'transformOrigin'){
			return $iLayer.css('transform-origin') || $iLayer.css('-webkit-transform-origin');
		}
		if(prop == 'transform-origin%' || prop == 'transformOrigin%'){
			var raw = $iLayer.css('transform-origin') || $iLayer.css('-webkit-transform-origin');
			var to = raw.split(' ');
			var x = Math.round((parseInt(to[0]) / (parseInt($layer.css('width'))  - 2)) * 100);
			var y = Math.round((parseInt(to[1]) / (parseInt($layer.css('height')) - 2)) * 100);
			return x + '% ' + y + '%';
		}
		if(prop == 'opacity'){
			return fixDecimal($iLayer.css('opacity'));
		}
		return null;
	}
	function getElementClass($layer, tCSS){
		//tCSS is for use in tranCiSSioner
		var s = '',
			_n = '\n',
			_t = '\t';
			var name = $layer.attr('id');
			var $oLayer = $('#' + name + O_LAYER);
			var $iLayer = $('#' + name + I_LAYER);
			var transform = getElementProp($layer, 'transform');
			var to = getElementProp($layer, 'transform-origin');
			if($('#toPos_ck').prop('checked')){
				to = getElementProp($layer, 'transform-origin%');
			}
			var op = getElementProp($layer, 'opacity');
			var left = getElementProp($layer, 'left') + 'px';
			var top = getElementProp($layer, 'top') + 'px';
			var w = getElementProp($layer, 'width') + 'px';
			var h = getElementProp($layer, 'height') + 'px';
			var fileName = getElementProp($layer, 'fileName');//css.images[name]
			s += '.' + name + '{' + _n;
			s += _t + 'display: block;' + _n;
			s += _t + 'position: absolute;' + _n;
			s += _t + 'opacity: ' + ( tCSS ? '@OPACITY@': op ) + ';' + _n;
			s += _t + 'left: ' + (tCSS?'@LEFT@': left ) + ';' + _n;
			s += _t + 'top: ' + (tCSS?'@TOP@': top ) + ';' + _n;
			s += _t + 'width: ' + w + ';' + _n;
			s += _t + 'height: ' + h + ';' + _n;
			s += _t + 'background-image: url("'+ fileName + '");' + _n;
			s += _t + 'background-repeat: no-repeat;' + _n;
			s += _t + 'background-position: ' + getElementProp($layer, 'background-position') + ';' + _n;
			s += _t + 'background-size: ' + getElementProp($layer, 'background-size')+ ';' + _n;
			if(tCSS){
				s += '@MATRIX@';
			}else{
				if(transform != 'none'){
					s += _t + 'transform: ' + transform + ';' + _n;
					s += _t + '-webkit-transform: ' + transform + ';' + _n;
					s += _t + '-ms-transform: ' + transform + ';' + _n;	
				}	
			}
			s += _t + 'transform-origin: ' + to + ';' + _n;
			s += _t + '-webkit-transform-origin: ' + to + ';' + _n;
			s += _t + '-ms-transform-origin: ' + to + ';' + _n;
			s += (tCSS)?'@FILTER@':'';
			s += (tCSS)?_t + 'will-change: @WILL_CHANGE@;' + _n:'';
			s += '}' + _n;		
		return s;
	}
	function createCSS(){
		var s = '',
			_n = '\n',
			_t = '\t';
		for(var i = 0; i < css.layers.length; i++){
			s += getElementClass($(css.layers[i]));
		}
		s += 'html, body {' + _n;
		s += _t + 'margin: 0;' + _n;
		s += _t + 'padding: 0;' + _n;
		s += '}' + _n;
		s += 'a {' + _n;
		s += _t + 'text-decoration: none;' + _n;
		s += _t + 'color: #000;' + _n;
		s += _t + 'border: none;' + _n;
		s += '}' + _n;
		s += '.banner {' + _n;
		s += _t + 'display: block;' + _n;
		s += _t + 'position: absolute;' + _n;
		s += _t + 'overflow: hidden;' + _n;
		s += _t + 'width: ' + (css.container.width - 2) + 'px;' + _n;
		s += _t + 'height: ' + (css.container.height -2) + 'px;' + _n;
		s += _t + 'background-color: ' + css.container.bgColor + ';' + _n;
		if(css.background.file){
			s += _t + 'background-image: url(' + css.background.file.name + ');' + _n;
			s += _t + 'background-repeat: no-repeat;' + _n;
		}
		s += _t + 'border: 1px solid ' + css.container.borderColor + ';' + _n;
		s += _t + 'cursor: pointer;' + _n;
		s += _t + 'transform-style: preserve-3d;' + _n;
		s += _t + '-webkit-transform-style: preserve-3d;' + _n;
		s += _t + '-ms-transform-style: preserve-3d;' + _n;
		s += '}' + _n;	
		return s;	
	}
	//EVENTS
	$guide_fl.change(function(evt){
		css.background.file = evt.target.files[0];
		if (css.background.file.type.match(/image.*/)){
			var reader = new FileReader();
			reader.onload = function(evt){
				var img = new Image();
				img.src = reader.result;
				changeSize(img.width,img.height);
				delete img;
				$stage.css('background-image', 'url(' + reader.result + ')');
			}
			reader.readAsDataURL(css.background.file);
		}
	});
	function populateSelectMenu(){
		var options = [];
		for(var name in css.images){
			options.push('<option value="' + name + '">' + name + '</option>');
		}
		options.reverse();
		$('#elem_sl').html(options.join(''));
	}
	$('#elem_sl').change(function(evt){
		var $this = $(evt.target);
		var elem = $('#' + $this.val());
		selectLayer(elem);
	});
	$size_sl.change(function(evt){
		evt.stopPropagation();
		evt.preventDefault();
		var raw = $(evt.target).val().split('x');
		changeSize(raw[0],raw[1]);
	});
	$width_txt.change(function(evt){
		evt.stopPropagation();
		evt.preventDefault();
		changeSize($width_txt.val(),$height_txt.val());
		return false;
	});
	$height_txt.change(function(evt){
		evt.stopPropagation();
		evt.preventDefault();
		changeSize($width_txt.val(),$height_txt.val());
		return false;
	});
	$('#bgColor_txt, #borderColor_txt').change(function(evt){
		evt.stopPropagation();
		evt.preventDefault();
		changeColors($('#bgColor_txt').val(), $('#borderColor_txt').val());
		return false;
	});
	$('#overflow_ck').change(function(evt){
		$stage.toggleClass('hideOverflow');
	});
	function onDragStart(evt){
		var layer = getLayer(evt.target.id);
		if(layer === this){
			selectLayer(layer);
		}
	}
	function onDragStop(evt){
		var layer = getLayer(evt.target.id);
		updateHUD($(layer));
	}
	function handleFileSelect(evt) {
    	evt.stopPropagation();
    	evt.preventDefault();
    	createLayer(evt.dataTransfer.files)
	}
	function handleDragOver(evt){
		evt.stopPropagation();
    	evt.preventDefault();
    	evt.dataTransfer.dropEffect = 'copy';
	}
	$id('stage').addEventListener('dragover', handleDragOver, false);
  	$id('stage').addEventListener('drop', handleFileSelect, false);
  	$id('stage-container').addEventListener('dragover', handleDragOver, false);
  	$id('stage-container').addEventListener('drop', handleFileSelect, false);
  	//tranCiSSioner
  	var currentTranCiSSioner = {target:null,name:'',x:0,y:0,css:'',matrix:''};
  	$('#trancissionerbutton').click(function(evt){
  		currentTranCiSSioner = {
  			target:css.currentLayer,
  			name:css.currentLayer.attr('id'),
  			x:parseFloat(css.currentLayer.css('left')),
  			y:parseFloat(css.currentLayer.css('top')),
  			css:getElementClass(css.currentLayer, true),
  			matrix:getElementProp(css.currentLayer, 'transform')
  		};
  		$('#scene_element_txt').val(currentTranCiSSioner.name);
  		$('#left_scene_txt').val(currentTranCiSSioner.x);
  		$('#top_scene_txt').val(currentTranCiSSioner.y);
  		$('.tranCiSSioner_tools').show();
  		$('.overlay').show();
  	});
  	$('#tranCiSSioner_close').click(function(evt){
  		$('.overlay').hide();
  		$('.tranCiSSioner_tools').hide();
  	});
  	function sideMap(side, offset){
  		var map = {
			'tl' : {x:-offset, y:-offset},
			'top': {x:0, y:-offset},
			'tr' : {x:offset, y:-offset},
			'left': {x:-offset, y:0},
			'none': {x:0, y:0},
			'right': {x:offset, y:0},
			'bl': {x:-offset, y:offset},
			'bottom': {x:0, y:offset},
			'br': {x:offset, y:offset}		
  		};
  		return map[side];
  	}
  	function tranCiSSionerMagic(){
  		/* tranCiSSioner MAGIC */
  		var s = '',
			_n = '\n',
			_t = '\t';
		/* RESTING POSITION */
		var offsetIn = parseFloat($('#offset_in_txt').val());
		var sideIn = $("input:radio[name=scene_in_rb]:checked").val();
		var sideOut = $("input:radio[name=scene_out_rb]:checked").val();
		var useMatrix = $('#tranCiSSioner_useMatrix_ck').prop('checked');
		var blurIn  = $('#tcss_blur_in_ck').prop('checked') ?$('#tcss_blur_in_ck').val() :'';
		var blurOut = $('#tcss_blur_out_ck').prop('checked')?$('#tcss_blur_out_ck').val():'';
		var fadeIn = $('#tcss_fade_in_sl').val();
		var fadeOut= $('#tcss_fade_out_sl').val();
		var filterIn  = blurIn + ' ' + fadeIn;
		var filterOut = blurOut + ' ' + fadeOut;
		var willChange = {'opacity':true, 'left': false, 'top': false, 'transform': false};
		var sm = sideMap(sideIn, offsetIn);
		var sceneIn = $('#scene_in_txt').val();
		var x1 = 0, y1 = 0, o1 = 0;
		x1 = (currentTranCiSSioner.x + sm.x) + 'px';
		y1 = (currentTranCiSSioner.y + sm.y) + 'px';
		o1 = parseFloat($('#opacity_in_txt').val()) + '';
		s += '/* LAYER: ' + currentTranCiSSioner.name + ' PROPERTIES */' + _n;
		var tempIn = currentTranCiSSioner.css;
		tempIn = tempIn.replace('@OPACITY@', o1);
		if(!useMatrix){
			tempIn = tempIn.replace('@LEFT@', x1);
			tempIn = tempIn.replace('@TOP@', y1);
			tempIn = tempIn.replace('@MATRIX@', '');
		}else{
			tempIn = tempIn.replace('@LEFT@', currentTranCiSSioner.x + 'px');
			tempIn = tempIn.replace('@TOP@', currentTranCiSSioner.y + 'px');
			willChange.transform = true;
			var transformIn = new WebKitCSSMatrix(currentTranCiSSioner.matrix);
			transformIn = transformIn.rotate(parseInt($('#rotate_in_txt').val()));
			transformIn = transformIn.scale(parseFloat($('#scale_in_txt').val()));
			transformIn = transformIn.translate(sm.x, sm.y);
			console.log([sm.x, sm.y]);
			var temp_mtrx = '';
			temp_mtrx += _t + 'transform: ' + transformIn.toString() + ';' + _n;
			temp_mtrx += _t + '-webkit-transform: ' + transformIn.toString()  + ';' + _n;
			tempIn = tempIn.replace('@MATRIX@', temp_mtrx);			
		}
		
		//will-change
		var willChangeArr = ['opacity'];
		if(!useMatrix){
			if(sideIn == 'tl' || sideIn == 'tr' || sideIn == 'bl' || sideIn == 'br' || sideOut == 'tl' || sideOut == 'tr' || sideOut == 'bl' || sideOut == 'br'){
				willChangeArr.push('left','top');
			}
			if(sideIn == 'top' || sideIn == 'bottom' || sideOut == 'top' || sideOut == 'bottom'){
				willChangeArr.push('top');
			}
			if(sideIn == 'left' || sideIn == 'right' || sideOut == 'left' || sideOut == 'right'){
				willChangeArr.push('left');
			}			
		}else{
			willChangeArr.push('transform');
		}
		if(filterIn != ' ' || filterOut != ' '){
			willChangeArr.push('-webkit-filter');
			if(filterIn != ' '){
				tempIn = tempIn.replace('@FILTER@', _t + '-webkit-filter: ' + filterIn + ';' + _n);
			}
		}else{
			tempIn = tempIn.replace('@FILTER@', '');
		}
		tempIn = tempIn.replace('@WILL_CHANGE@', willChangeArr.join(', '));
		s += tempIn;
		/* SCENE IN */
		s += '/* scene '+ sceneIn + ' ' + currentTranCiSSioner.name + ' APPEARS */' + _n;
		willChange = {'opacity':true, 'left': false, 'top': false};
		if(sideIn == 'tl' || sideIn == 'tr' || sideIn == 'bl' || sideIn == 'br'){
			willChange.left = willChange.top = !useMatrix;
		}else if(sideIn == 'top' || sideIn == 'bottom'){
			willChange.top = !useMatrix;
		}else if(sideIn == 'left' || sideIn == 'right'){
			willChange.left = !useMatrix;
		}
		s += '.scene' + sceneIn  + ' .'+ currentTranCiSSioner.name + '{' + _n;
		var transIn = [];
		if(willChange.opacity){
			s += _t + 'opacity: 1;' + _n;
			transIn.push('opacity ' + $('#duration_in_txt').val() + 's' + ' ' + $('#ease_in_sl').val() + ' ' + ($('#delay_in_txt').val() == '0'?'':$('#delay_in_txt').val() + 's')) ;
		}
		if(!useMatrix){
			if(willChange.left){
				s += _t + 'left: ' + $('#left_scene_txt').val() + 'px;' + _n;
				transIn.push('left ' + $('#duration_in_txt').val() + 's' + ' ' + $('#ease_in_sl').val() + ' ' + ($('#delay_in_txt').val() == '0'?'':$('#delay_in_txt').val() + 's'));
			}
			if(willChange.top){
				s += _t + 'top: ' + $('#top_scene_txt').val() + 'px;' + _n;
				transIn.push('top ' + $('#duration_in_txt').val() + 's' + ' ' + $('#ease_in_sl').val() + ' ' + ($('#delay_in_txt').val() == '0'?'':$('#delay_in_txt').val() + 's'));
			}			
		}else{
			willChange.transform = true;
			s += _t + 'transform: ' + currentTranCiSSioner.matrix + ';' + _n;
			s += _t + '-webkit-transform: ' + currentTranCiSSioner.matrix  + ';' + _n;
			s += _t + '-ms-transform: ' + currentTranCiSSioner.matrix  + ';' + _n;
			transIn.push ('@TRANSFORM@ ' + $('#duration_in_txt').val() + 's' + ' ' + $('#ease_in_sl').val() + ' ' + ($('#delay_in_txt').val() == '0'?'':$('#delay_in_txt').val() + 's'));
		}
		if(filterIn != ' '){
			s += _t + '-webkit-filter: none;' + _n;
			transIn.push('-webkit-filter ' + $('#duration_in_txt').val() + 's' + ' ' + $('#ease_in_sl').val() + ' ' + ($('#delay_in_txt').val() == '0'?'':$('#delay_in_txt').val() + 's'));
		}
		s += _t + 'transition: ' + transIn.join(', ').replace('@TRANSFORM@', 'transform') + ';' + _n;
		s += _t + '-webkit-transition: ' + transIn.join(', ').replace('@TRANSFORM@', '-webkit-transform') + ';' + _n;
		s += '}' + _n; 
		/* SCENE OUT */
		var sceneOut = $('#scene_out_txt').val();
		if(sceneOut > '0'){
			var offsetOut = parseFloat($('#offset_out_txt').val());
			sm = sideMap(sideOut, offsetOut);
			var x2 = 0, y2 = 0, o2 = 0;
			x2 = (currentTranCiSSioner.x + sm.x) + 'px';
			y2 = (currentTranCiSSioner.y + sm.y) + 'px';
			o2 = parseFloat($('#opacity_out_txt').val()) + '';
			s += '/* scene '+ sceneOut + ' ' + currentTranCiSSioner.name + ' DISAPPEARS */' + _n;
			s += '.scene' + sceneOut + ' .'+ currentTranCiSSioner.name +'{' + _n;
			willChange = {'opacity':true, 'left': false, 'top': false};
			if(sideOut == 'tl' || sideOut == 'tr' || sideOut == 'bl' || sideOut == 'br'){
				willChange.left = willChange.top = !useMatrix;
			}else if(sideOut == 'top' || sideOut == 'bottom'){
				willChange.top = !useMatrix;
			}else if(sideOut == 'left' || sideOut == 'right'){
				willChange.left = !useMatrix;
			}
			var transOut = [];
			if(willChange.opacity){
				s += _t + 'opacity: '+ o2 + ';' + _n;
				transOut.push('opacity ' + $('#duration_out_txt').val() + 's' + ' ' + $('#ease_out_sl').val() + ($('#delay_out_txt').val() == '0'?'':' ' + $('#delay_out_txt').val() + 's'));
			}
			if(!useMatrix){
				if(willChange.left){
					s += _t + 'left: ' + x2 + ';'  + _n;
					transOut.push('left ' + $('#duration_out_txt').val() + 's' + ' ' + $('#ease_out_sl').val() + ($('#delay_out_txt').val() == '0'?'':' ' + $('#delay_out_txt').val() + 's'));
				}
				if(willChange.top){
					s += _t + 'top: ' + y2 + ';' + _n;
					transOut.push('top ' + $('#duration_out_txt').val() + 's' + ' ' + $('#ease_in_sl').val() + ($('#delay_out_txt').val() == '0'?'':' ' + $('#delay_out_txt').val() + 's'));
				}				
			}else{
				willChange.transform = true;
				var transformOut = new WebKitCSSMatrix();
				transformOut = transformOut.rotate(parseInt($('#rotate_out_txt').val()));
				transformOut = transformOut.scale(parseFloat($('#scale_out_txt').val()));
				transformOut = transformOut.translate(sm.x, sm.y);
				s += _t + 'transform: ' + transformOut.toString() + ';' + _n;
				s += _t + '-webkit-transform: ' + transformOut.toString()  + ';' + _n;
				s += _t + '-ms-transform: ' + transformOut.toString()  + ';' + _n;
				transOut.push ('@TRANSFORM@ ' + $('#duration_out_txt').val() + 's' + ' ' + $('#ease_out_sl').val() + ($('#delay_out_txt').val() == '0'?'':' ' + $('#delay_out_txt').val() + 's'));
			}
			if(filterOut != ' '){
				s += _t + '-webkit-filter: ' + filterOut + ';' + _n;
				transOut.push('-webkit-filter ' + $('#duration_out_txt').val() + 's' + ' ' + $('#ease_in_sl').val() + ($('#delay_out_txt').val() == '0'?'':' ' + $('#delay_out_txt').val() + 's'));
			}
			s += _t + 'transition: ' + transOut.join(', ').replace('@TRANSFORM@', 'transform') + ';' + _n;
			s += _t + '-webkit-transition: ' + transOut.join(', ').replace('@TRANSFORM@', '-webkit-transform') + ';' + _n;
			s += '}' + _n;			
		}
		return s;
  	}
  	$('#scene_element_txt').change(function(evt){
  		var nn = $(evt.target).val();
  		currentTranCiSSioner.css = currentTranCiSSioner.css.replace('.' + currentTranCiSSioner.name, '.' + nn);
  		currentTranCiSSioner.name = nn;
  	});
  	$('#ss_next_scene').click(function(evt){
  		var $sceneIn = $('#scene_in_txt'), $sceneOut = $('#scene_out_txt'), next = parseInt($sceneIn.val());
  		$sceneIn.val(next + 1);
  		if($sceneOut.val() != '0'){
  			$sceneOut.val(next + 2);
  		}
  		evt.preventDefault();
  	});
  	$('#tranCiSSioner_app-button').click(function(evt){
		$('#transition_css_txt').val(tranCiSSionerMagic());
		$('#transition_css_txt').select();
		return s;
  	});
//Sprite Slicer
var $guideX = $('.ss_guide_vert'), $guideY = $('.ss_guide'), $ss_container = $('.ss_container'), $ss_image = $('.ss_image'), $cuts = $('#ss_cuts_txt');
var currentSpriteSlice = {target:null,name:'', x:0, y:0, width:0, height:0, css:''};
$('#spriteslicerbutton').click(function(evt){
	//$cuts.val('');
	var $iLayer = $('#' + css.currentLayer.attr('id') + I_LAYER);
	currentSpriteSlice = {
		target:css.currentLayer,
  		name:css.currentLayer.attr('id'),
  		x:parseFloat(css.currentLayer.css('left')),
  		y:parseFloat(css.currentLayer.css('top')),
  		width:parseFloat($iLayer.css('width')),
  		height:parseFloat($iLayer.css('height')),
  		image: $iLayer.css('background-image'),
  		bgSize: $iLayer.css('background-size')
	};
	$ss_container.css('width', currentSpriteSlice.width + 'px');
	$ss_container.css('height', currentSpriteSlice.height + 'px');
	$ss_image.css('background-image', currentSpriteSlice.image);
	$ss_image.css('width', currentSpriteSlice.width + 'px');
	$ss_image.css('height', currentSpriteSlice.height + 'px');
	$ss_image.css('background-repeat', 'no-repeat');
	$ss_image.css('background-size', currentSpriteSlice.bgSize);
	$('.spriteSlicer_tools').show();
  	$('.overlay').show();
});
$('#spriteSlicer_close').click(function(evt){
  	$('.overlay').hide();
  	$('.spriteSlicer_tools').hide();
});
//follow mouse
$ss_container.on('mousemove', function(evt){
	var posY = Math.round(evt.pageY - $ss_container.offset().top);
	var posX = Math.round(evt.pageX - $ss_container.offset().left);
	$guideY.text('x: ' + posX +' - y: ' + posY + 'px');
	$guideX.css('left', posX + 'px');
	$guideX.css('height', posY + 'px');
	$guideY.css('top', posY + 'px');
});
$ss_container.on('click', function(evt){
	var posX = Math.round(evt.pageX - $ss_container.offset().left);
	var posY = Math.round(evt.pageY - $ss_container.offset().top);
	var cuts = $cuts.val() + posY + ',';
	if(evt.shiftKey){
		cuts = $cuts.val() + posX + ':' + posY  + ',';
	}
	$cuts.val(cuts);
});
var currentSlices;
var $applyButton = $('#ss_apply');
var $slices = $('#ss_slices');
function createSlices(){
	var layered = $('#ss_layered_ck').prop('checked');
	var transition = $('#ss_transition_ck').prop('checked');
	var staggered = $('#ss_staggered_ck').prop('checked');
	var sliceIsScene = $('#ss_scene_per_slice_ck').prop('checked');
	var sceneIn = $('#ss_scene_in_txt').val();
	var sceneOut = $('#ss_scene_out_txt').val();
	var staggerIn = parseFloat($('#ss_delay_in').val());
	var staggerOut = parseFloat($('#ss_delay_out').val());
	var cuts_arr = $cuts.val().split(',');
	cuts_arr[cuts_arr.length - 1] = currentSpriteSlice.height + '';
	var s = '',
		_n = '\n',
		_t = '\t';
	var pos = currentSpriteSlice.y;
	var height = 0;
	var offset = 0;
	var posX = currentSpriteSlice.x;
	var width = 0;
	var offsetX = 0;
	var last = cuts_arr.length;
	currentSlices = [];
	s += '/* SPRITES: ' + $cuts.val() + ' */' + _n;
	for(var i=0; i < cuts_arr.length; i++){
		var slice = {top:0, height:0, width:0, left:0, backgroundPositionY:0, backgroundPositionX:0};
		var val = parseInt(cuts_arr[i]);
		var valX = 0;
		if(cuts_arr[i].indexOf(':') != -1){
			var raw = cuts_arr[i].split(':');
			val = parseInt(raw[1]);
			valX = parseInt(raw[0]);
		}
		var name = currentSpriteSlice.name + ( i + 1 );
		height = (i != 0)?(val - parseInt(cuts_arr[i-1])): val;
		s += '/* LAYER: ' + name + ' PROPERTIES */' + _n;
		s += '.' + name + '{' + _n;
		s += _t + 'display: block;' + _n;
		s += _t + 'position: absolute;' + _n;
		if(transition){
			s += _t + 'opacity: 0;' + _n;
		}else{
			s += _t + 'opacity: 1;' + _n;
		}
		s += _t + 'left: ' + (currentSpriteSlice.x + valX) + 'px;' + _n;
		slice.top = pos;
		s += _t + 'top: ' + pos + 'px;' + _n;
		pos += (layered)?0:height;
		width = (currentSpriteSlice.width - valX);
		slice.width = width;
		s += _t + 'width: ' + width + 'px;' + _n;
		slice.height = height;
		s += _t + 'height: ' + height + 'px;' + _n;
		s += _t + 'background-image: url("'+ css.images[currentSpriteSlice.name] + '");' + _n;
		s += _t + 'background-repeat: no-repeat;' + _n;
		slice.backgroundPositionY = offset * -1;
		slice.backgroundPositionX =  (valX * -1);
		s += _t + 'background-position: ' + slice.backgroundPositionX + 'px ' + slice.backgroundPositionY + 'px;' + _n;
		offset = val;
		s += _t + 'background-size: ' + currentSpriteSlice.bgSize + ';' + _n;
		if(transition){
			s += _t + 'will-change: opacity;' + _n;
		}
		s += '}' + _n;
		if(transition){
			var sIn = (sliceIsScene)?parseInt(sceneIn) + i:sceneIn;
			s += '/* scene ' + sIn + ' ' + name + ' APPEARS */' + _n;
			s += '.scene' + sIn + ' .' + name + '{' + _n;
			s += _t + 'opacity: 1;' + _n;
			var staggeredDelay = (staggered)?(Math.round(((i + 1) * staggerIn) * 100)/100):staggerIn;
			var trans = 'transition: opacity 0.5s ease-out ' + staggeredDelay + 's;' + _n;
			s += _t + trans;
			s += _t + '-webkit-' + trans;
			s += '}' + _n;
			var sOut = (sliceIsScene)?parseInt(sceneOut) + i:sceneOut;
			s += '/* scene ' + sOut + ' ' + name + ' DISAPPEARS */' + _n;
			s += '.scene' + sOut + ' .' + currentSpriteSlice.name + ( i + 1 ) + '{' + _n;
			s += _t + 'opacity: 0;' + _n;
			staggeredDelay = (staggered)?(Math.round(((i + 1) * staggerOut) * 100)/100):staggerOut;
			trans = 'transition: opacity 0.3s ease-in ' + staggeredDelay + 's;' + _n;
			s += _t + trans;
			s += _t + '-webkit-' + trans;
			s += '}' + _n;
		}
		currentSlices.push(slice);
	}
	$slices.attr('max', currentSlices.length);
	$('#ss_code_txt').val(s).select();
}
$('#spriteSplicer_app-button').click(function(evt){
	createSlices();
});
$applyButton.click(function(evt){
	var $iLayer = $('#' + css.currentLayer.attr('id') + I_LAYER);
	var slice = currentSlices[parseInt($slices.val()) - 1];
	$iLayer.css('background-position', slice.backgroundPositionX +'px ' + slice.backgroundPositionY + 'px');
	$iLayer.css('width', slice.width + 'px');
	$iLayer.css('height', slice.height + 'px');
	$('#' + css.currentLayer.attr('id')).css('top', slice.top + 'px');
	$('#' + css.currentLayer.attr('id')).css('left', slice.left + 'px');
	updateHUD(css.currentLayer);
	$('.overlay').hide();
  	$('.spriteSlicer_tools').hide();
});
$('#ss_reset').click(function(evt){
	$cuts.val('');
});
	//init
	onHUDEvents();
});
</script>
</body>
</html>
